{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Home","text":""},{"location":"#github-organization-management-examples","title":"GitHub Organization Management Examples","text":"<p>Welcome to the comprehensive guide for managing GitHub organizations using Infrastructure as Code (IaC) with Terraform.</p>"},{"location":"#what-is-this","title":"What is this?","text":"<p>This repository provides example configurations and templates for managing various aspects of GitHub organizations:</p> <ul> <li>Organization Settings - Configure organization-level settings and policies</li> <li>Repositories - Create and manage repositories with branch protection</li> <li>Rulesets - Define organization-wide and repository-level rulesets</li> <li>Teams - Manage teams, members, and repository access permissions</li> </ul>"},{"location":"#key-features","title":"Key Features","text":"<p>:material-file-code: YAML-based Configuration Easy-to-read and maintain configuration files for all resources.</p> <p>:material-puzzle: Modular Architecture Independent modules for different aspects of organization management.</p> <p>:material-shield-check: Branch Protection Repository and organization-level rulesets for code quality enforcement.</p> <p>:material-account-group: Team Management Comprehensive team and permission management with role-based access control.</p> <p>:material-currency-usd-off: Free Tier Compatible Repository-level rulesets work on public repositories with GitHub Free tier.</p> <p>:material-scale-balance: Flexible Rules Support for pull request requirements, status checks, and custom rules.</p>"},{"location":"#quick-start","title":"Quick Start","text":"<ol> <li>Prerequisites: Ensure you have Terraform installed and GitHub credentials configured</li> <li>Clone: Clone this repository to your local machine</li> <li>Configure: Edit the YAML configuration files in each module's <code>configs/</code> directory</li> <li>Deploy: Run <code>terraform init</code>, <code>terraform plan</code>, and <code>terraform apply</code> in each module</li> </ol> <pre><code># Example: Deploy repository configuration\ncd repos\nterraform init\nterraform plan\nterraform apply\n</code></pre>"},{"location":"#documentation-structure","title":"Documentation Structure","text":"<ul> <li>Overview - Understanding the repository structure and architecture</li> <li>Prerequisites - Requirements and setup instructions</li> <li>Modules - Detailed documentation for each Terraform module</li> <li>Guides - Step-by-step tutorials and how-tos</li> <li>Examples - Practical examples and use cases</li> <li>Reference - Technical reference and troubleshooting</li> </ul>"},{"location":"#getting-help","title":"Getting Help","text":"<p>If you encounter issues or have questions:</p> <ul> <li>Check the Troubleshooting guide</li> <li>Review the Examples section</li> <li>Open an issue on the GitHub repository</li> </ul>"},{"location":"#license","title":"License","text":"<p>This is a template repository for educational and reference purposes.</p>"},{"location":"overview/","title":"Overview","text":""},{"location":"overview/#repository-overview","title":"Repository Overview","text":"<p>This repository demonstrates how to manage GitHub organizations using Infrastructure as Code (IaC) principles with Terraform and the GitHub provider.</p>"},{"location":"overview/#architecture","title":"Architecture","text":"<p>The repository is organized into four independent Terraform modules, each managing a specific aspect of GitHub organization management:</p> <pre><code>graph TD\n    A[GitHub Organization Management] --&gt; B[Organization Settings]\n    A --&gt; C[Repositories]\n    A --&gt; D[Rulesets]\n    A --&gt; E[Teams]\n\n    B --&gt; B1[Billing &amp; Settings]\n    B --&gt; B2[Member Privileges]\n\n    C --&gt; C1[Repository Creation]\n    C --&gt; C2[Repository Config]\n    C --&gt; C3[Repository Rulesets]\n\n    D --&gt; D1[Org-level Rulesets]\n    D --&gt; D2[Branch Protection]\n\n    E --&gt; E1[Team Management]\n    E --&gt; E2[Team Members]\n    E --&gt; E3[Repository Access]</code></pre>"},{"location":"overview/#module-structure","title":"Module Structure","text":"<p>Each module follows a consistent structure:</p> <pre><code>module_name/\n\u251c\u2500\u2500 main.tf          # Resource definitions\n\u251c\u2500\u2500 locals.tf        # Configuration loading and data transformation\n\u251c\u2500\u2500 variables.tf     # Input variables\n\u251c\u2500\u2500 outputs.tf       # Output values\n\u251c\u2500\u2500 providers.tf     # Provider configuration\n\u251c\u2500\u2500 backend.tf       # Terraform backend configuration\n\u2514\u2500\u2500 configs/         # YAML configuration files\n    \u2514\u2500\u2500 *.yaml       # Configuration data\n</code></pre>"},{"location":"overview/#configuration-approach","title":"Configuration Approach","text":"<p>All modules use YAML-based configuration for ease of maintenance:</p> <ul> <li>Human-readable format</li> <li>Easy to version control</li> <li>Simple to review in pull requests</li> <li>Clear separation between code and configuration</li> <li>Support for comments and documentation</li> </ul>"},{"location":"overview/#terraform-resources","title":"Terraform Resources","text":"<p>The modules use the following main Terraform resources:</p> Module Primary Resources Organization Settings <code>github_organization_settings</code> Repositories <code>github_repository</code>, <code>github_repository_ruleset</code> Rulesets <code>github_organization_ruleset</code> Teams <code>github_team</code>, <code>github_team_membership</code>, <code>github_team_repository</code>"},{"location":"overview/#key-design-principles","title":"Key Design Principles","text":""},{"location":"overview/#1-modularity","title":"1. Modularity","text":"<p>Each module can be deployed independently. You don't need to deploy all modules - only the ones relevant to your use case.</p>"},{"location":"overview/#2-safe-defaults","title":"2. Safe Defaults","text":"<p>All modules use Terraform's <code>try()</code> function to provide sensible defaults for optional parameters, reducing configuration overhead.</p>"},{"location":"overview/#3-yaml-configuration","title":"3. YAML Configuration","text":"<p>Configuration is separated from Terraform code, making it easier for non-technical users to manage settings.</p>"},{"location":"overview/#4-idempotency","title":"4. Idempotency","text":"<p>All configurations are idempotent - you can run <code>terraform apply</code> multiple times safely.</p>"},{"location":"overview/#5-free-tier-compatibility","title":"5. Free Tier Compatibility","text":"<p>Repository-level rulesets work on public repositories with GitHub Free tier. Organization-level features are clearly marked when they require Team/Enterprise plans.</p>"},{"location":"overview/#module-dependencies","title":"Module Dependencies","text":"<p>The modules have minimal dependencies on each other:</p> <pre><code>graph LR\n    A[Organization Settings]\n    B[Repositories]\n    C[Rulesets]\n    D[Teams]\n\n    D -.-&gt; B\n\n    style A fill:#e1f5ff\n    style B fill:#e1f5ff\n    style C fill:#fff3e0\n    style D fill:#e1f5ff</code></pre> <p>Dependency Notes</p> <ul> <li>Teams module optionally depends on Repositories (only if granting team access to repos)</li> <li>Rulesets (org-level) requires GitHub Team/Enterprise plan</li> <li>All other modules are independent and can be deployed in any order</li> </ul>"},{"location":"overview/#next-steps","title":"Next Steps","text":"<ul> <li>Prerequisites - Set up your environment</li> <li>Modules Documentation - Deep dive into each module</li> <li>Getting Started Guide - Deploy your first configuration</li> </ul>"},{"location":"prerequisites/","title":"Prerequisites","text":""},{"location":"prerequisites/#prerequisites","title":"Prerequisites","text":"<p>Before using these Terraform modules, ensure you have the following prerequisites in place.</p>"},{"location":"prerequisites/#required-software","title":"Required Software","text":""},{"location":"prerequisites/#terraform","title":"Terraform","text":"<p>You need Terraform version 1.0 or higher.</p> macOSLinuxWindows <pre><code># Using Homebrew\nbrew tap hashicorp/tap\nbrew install hashicorp/tap/terraform\n</code></pre> <pre><code># Using apt (Debian/Ubuntu)\nwget -O- https://apt.releases.hashicorp.com/gpg | sudo gpg --dearmor -o /usr/share/keyrings/hashicorp-archive-keyring.gpg\necho \"deb [signed-by=/usr/share/keyrings/hashicorp-archive-keyring.gpg] https://apt.releases.hashicorp.com $(lsb_release -cs) main\" | sudo tee /etc/apt/sources.list.d/hashicorp.list\nsudo apt update &amp;&amp; sudo apt install terraform\n</code></pre> <pre><code># Using Chocolatey\nchoco install terraform\n</code></pre> <p>Verify installation: </p><pre><code>terraform version\n</code></pre><p></p>"},{"location":"prerequisites/#git","title":"Git","text":"<p>Git is required for version control.</p> <pre><code># Check if git is installed\ngit --version\n</code></pre>"},{"location":"prerequisites/#github-requirements","title":"GitHub Requirements","text":""},{"location":"prerequisites/#github-account","title":"GitHub Account","text":"<p>You need a GitHub account with appropriate permissions:</p> <ul> <li>Organization Owner role for managing organization settings</li> <li>Admin access to repositories you want to manage</li> <li>Ability to create and manage teams</li> </ul>"},{"location":"prerequisites/#github-plan-requirements","title":"GitHub Plan Requirements","text":"<p>Different features require different GitHub plans:</p> Feature Free Team Enterprise Organization Settings \u2705 \u2705 \u2705 Public Repositories \u2705 \u2705 \u2705 Private Repositories \u2705 (limited) \u2705 \u2705 Repository Rulesets \u2705 (public repos) \u2705 \u2705 Organization Rulesets \u274c \u2705 \u2705 Teams \u2705 \u2705 \u2705 <p>Organization Rulesets Limitation</p> <p>The <code>rulesets/</code> module (organization-level rulesets) requires a GitHub Team or Enterprise plan. However, repository-level rulesets in the <code>repos/</code> module work with the free tier on public repositories.</p>"},{"location":"prerequisites/#authentication","title":"Authentication","text":"<p>You need to authenticate Terraform with GitHub using one of these methods:</p>"},{"location":"prerequisites/#option-1-personal-access-token-pat-recommended-for-getting-started","title":"Option 1: Personal Access Token (PAT) - Recommended for Getting Started","text":"<ol> <li>Go to GitHub Settings &gt; Developer settings &gt; Personal access tokens &gt; Tokens (classic)</li> <li>Click \"Generate new token (classic)\"</li> <li>Give it a descriptive name (e.g., \"Terraform GitHub Management\")</li> <li>Select the following scopes:</li> <li><code>repo</code> (Full control of private repositories)</li> <li><code>admin:org</code> (Full control of orgs and teams)</li> <li><code>delete_repo</code> (Delete repositories)</li> <li>Click \"Generate token\"</li> <li>Copy the token immediately (you won't see it again)</li> </ol> <p>Set the token as an environment variable:</p> <pre><code>export GITHUB_TOKEN=\"your_token_here\"\n</code></pre> <p>Persistent Token</p> <p>Add the export command to your <code>~/.bashrc</code>, <code>~/.zshrc</code>, or equivalent shell configuration file to make it persistent across sessions.</p>"},{"location":"prerequisites/#option-2-github-app-recommended-for-production","title":"Option 2: GitHub App - Recommended for Production","text":"<p>GitHub Apps provide more granular permissions and better security:</p> <ol> <li>Create a GitHub App in your organization settings</li> <li>Grant necessary permissions</li> <li>Install the app in your organization</li> <li>Generate a private key</li> <li>Configure Terraform to use the app credentials</li> </ol> <p>For detailed instructions, see the Authentication Guide.</p>"},{"location":"prerequisites/#terraform-backend-optional-but-recommended","title":"Terraform Backend (Optional but Recommended)","text":"<p>For team collaboration and state management, configure a remote backend:</p>"},{"location":"prerequisites/#option-1-terraform-cloud","title":"Option 1: Terraform Cloud","text":"<pre><code>terraform {\n  backend \"remote\" {\n    organization = \"your-org\"\n    workspaces {\n      name = \"github-management\"\n    }\n  }\n}\n</code></pre>"},{"location":"prerequisites/#option-2-s3-backend","title":"Option 2: S3 Backend","text":"<pre><code>terraform {\n  backend \"s3\" {\n    bucket = \"your-terraform-state-bucket\"\n    key    = \"github-org/terraform.tfstate\"\n    region = \"us-east-1\"\n  }\n}\n</code></pre> <p>State File Security</p> <p>The Terraform state file contains sensitive information including GitHub tokens. Always use encrypted remote backends for production use.</p>"},{"location":"prerequisites/#network-requirements","title":"Network Requirements","text":"<p>Ensure your network allows connections to:</p> <ul> <li><code>api.github.com</code> (GitHub API)</li> <li><code>github.com</code> (GitHub web interface)</li> <li><code>registry.terraform.io</code> (Terraform Registry for provider downloads)</li> </ul>"},{"location":"prerequisites/#recommended-tools","title":"Recommended Tools","text":"<p>While not required, these tools can enhance your workflow:</p> <ul> <li>GitHub CLI - Command-line tool for GitHub operations</li> <li>terraform-docs - Generate documentation from Terraform modules</li> <li>tflint - Terraform linter</li> <li>pre-commit - Git hooks for code quality</li> </ul>"},{"location":"prerequisites/#knowledge-prerequisites","title":"Knowledge Prerequisites","text":"<p>Basic understanding of:</p> <ul> <li>Git and version control</li> <li>Terraform fundamentals (resources, variables, state)</li> <li>YAML syntax</li> <li>GitHub organization management concepts</li> </ul>"},{"location":"prerequisites/#next-steps","title":"Next Steps","text":"<p>Once you have all prerequisites in place:</p> <ol> <li>Getting Started Guide - Deploy your first configuration</li> <li>Authentication Guide - Detailed authentication setup</li> <li>Modules Documentation - Learn about each module</li> </ol>"},{"location":"examples/advanced-config/","title":"Advanced Configuration","text":""},{"location":"examples/advanced-config/#advanced-configuration-examples","title":"Advanced Configuration Examples","text":"<p>Advanced patterns for complex organizational needs.</p>"},{"location":"examples/advanced-config/#multi-environment-setup","title":"Multi-Environment Setup","text":"<p>Manage different environments with separate configurations.</p>"},{"location":"examples/advanced-config/#directory-structure","title":"Directory Structure","text":"<pre><code>repos/\n\u251c\u2500\u2500 main.tf\n\u251c\u2500\u2500 locals.tf\n\u251c\u2500\u2500 configs/\n\u2502   \u251c\u2500\u2500 repositories-dev.yaml\n\u2502   \u251c\u2500\u2500 repositories-staging.yaml\n\u2502   \u2514\u2500\u2500 repositories-prod.yaml\n</code></pre>"},{"location":"examples/advanced-config/#workspace-based-configuration","title":"Workspace-Based Configuration","text":"locals.tf<pre><code>locals {\n  environment = terraform.workspace\n\n  repositories = yamldecode(\n    file(\"${path.module}/configs/repositories-${local.environment}.yaml\")\n  ).repositories\n}\n</code></pre>"},{"location":"examples/advanced-config/#environment-specific-configurations","title":"Environment-Specific Configurations","text":"DevelopmentStagingProduction configs/repositories-dev.yaml<pre><code>repositories:\n  my-app-dev:\n    name: \"my-app-dev\"\n    visibility: \"private\"\n\n    rulesets:\n      main-protection:\n        name: \"Dev Protection\"\n        enforcement: \"evaluate\"  # Dry-run mode\n        branch_patterns:\n          - \"main\"\n        rules:\n          update: true\n          pull_request:\n            required_approving_review_count: 1\n</code></pre> configs/repositories-staging.yaml<pre><code>repositories:\n  my-app-staging:\n    name: \"my-app-staging\"\n    visibility: \"private\"\n\n    rulesets:\n      main-protection:\n        name: \"Staging Protection\"\n        enforcement: \"active\"\n        branch_patterns:\n          - \"main\"\n        rules:\n          update: true\n          pull_request:\n            required_approving_review_count: 1\n            require_code_owner_review: true\n</code></pre> configs/repositories-prod.yaml<pre><code>repositories:\n  my-app-prod:\n    name: \"my-app-prod\"\n    visibility: \"private\"\n\n    rulesets:\n      main-protection:\n        name: \"Production Protection\"\n        enforcement: \"active\"\n        branch_patterns:\n          - \"main\"\n        rules:\n          update: true\n          deletion: true\n          non_fast_forward: true\n          pull_request:\n            required_approving_review_count: 2\n            require_code_owner_review: true\n            required_review_thread_resolution: true\n</code></pre>"},{"location":"examples/advanced-config/#usage","title":"Usage","text":"<pre><code># Deploy to development\nterraform workspace select dev\nterraform apply\n\n# Deploy to staging\nterraform workspace select staging\nterraform apply\n\n# Deploy to production\nterraform workspace select prod\nterraform apply\n</code></pre>"},{"location":"examples/advanced-config/#organization-rulesets-teamenterprise","title":"Organization Rulesets (Team/Enterprise)","text":"<p>Requires GitHub Team/Enterprise Plan</p>"},{"location":"examples/advanced-config/#tiered-protection-by-repository-pattern","title":"Tiered Protection by Repository Pattern","text":"rulesets/configs/org_rulesets.yaml<pre><code>org_rulesets:\n  # Critical production services\n  production-critical:\n    name: \"Production Critical Services\"\n    enforcement: \"active\"\n\n    repository_name_patterns:\n      include:\n        - \"prod-*\"\n        - \"production-*\"\n      exclude:\n        - \"*-sandbox\"\n        - \"*-test\"\n\n    branch_patterns:\n      include:\n        - \"main\"\n        - \"master\"\n\n    bypass_actors:\n      - actor_id: 1234567  # SRE team\n        actor_type: \"Team\"\n        bypass_mode: \"pull_request\"\n\n    rules:\n      update: true\n      deletion: true\n      required_linear_history: true\n      required_signatures: true\n      non_fast_forward: true\n\n      pull_request:\n        required_approving_review_count: 3  # 3 approvals\n        require_code_owner_review: true\n        require_last_push_approval: true\n        required_review_thread_resolution: true\n\n      required_status_checks:\n        strict_required_status_checks_policy: true\n        required_checks:\n          - context: \"ci/build\"\n          - context: \"ci/test\"\n          - context: \"ci/security-scan\"\n          - context: \"ci/compliance-check\"\n          - context: \"ci/performance-test\"\n\n  # Standard services\n  standard-services:\n    name: \"Standard Services\"\n    enforcement: \"active\"\n\n    repository_name_patterns:\n      include:\n        - \"*-service\"\n        - \"*-api\"\n\n    branch_patterns:\n      include:\n        - \"main\"\n\n    rules:\n      update: true\n      deletion: true\n      non_fast_forward: true\n\n      pull_request:\n        required_approving_review_count: 2\n        require_code_owner_review: true\n        dismiss_stale_reviews_on_push: true\n\n      required_status_checks:\n        strict_required_status_checks_policy: true\n        required_checks:\n          - context: \"ci/test\"\n          - context: \"ci/lint\"\n\n  # Development repositories\n  development:\n    name: \"Development Standards\"\n    enforcement: \"active\"\n\n    repository_name_patterns:\n      include:\n        - \"dev-*\"\n        - \"*-poc\"\n\n    branch_patterns:\n      include:\n        - \"main\"\n        - \"develop\"\n\n    rules:\n      update: true\n      deletion: false  # Allow deletion\n      non_fast_forward: false  # Allow force push\n\n      pull_request:\n        required_approving_review_count: 1\n</code></pre>"},{"location":"examples/advanced-config/#complex-team-hierarchies","title":"Complex Team Hierarchies","text":""},{"location":"examples/advanced-config/#multi-level-team-structure","title":"Multi-Level Team Structure","text":"teams/configs/teams.yaml<pre><code>teams:\n  # Executive level\n  engineering-leadership:\n    name: \"Engineering Leadership\"\n    description: \"Engineering executives and directors\"\n    privacy: \"closed\"\n\n    members:\n      - username: \"cto\"\n        role: \"maintainer\"\n      - username: \"vp-engineering\"\n        role: \"maintainer\"\n\n    repositories:\n      - repository: \"infrastructure\"\n        permission: \"admin\"\n      - repository: \"security-policies\"\n        permission: \"admin\"\n\n  # Platform level\n  platform-team:\n    name: \"Platform Engineering\"\n    description: \"Platform and infrastructure team\"\n    privacy: \"closed\"\n\n    members:\n      - username: \"platform-lead\"\n        role: \"maintainer\"\n      - username: \"sre-1\"\n        role: \"member\"\n      - username: \"sre-2\"\n        role: \"member\"\n\n    repositories:\n      - repository: \"infrastructure\"\n        permission: \"admin\"\n      - repository: \"platform-tools\"\n        permission: \"admin\"\n      - repository: \"monitoring\"\n        permission: \"admin\"\n\n  # Product teams\n  product-team-alpha:\n    name: \"Product Team Alpha\"\n    description: \"Alpha product development team\"\n    privacy: \"closed\"\n\n    members:\n      - username: \"alpha-lead\"\n        role: \"maintainer\"\n      - username: \"alpha-frontend-dev\"\n        role: \"member\"\n      - username: \"alpha-backend-dev\"\n        role: \"member\"\n\n    repositories:\n      - repository: \"alpha-frontend\"\n        permission: \"push\"\n      - repository: \"alpha-backend\"\n        permission: \"push\"\n      - repository: \"alpha-mobile\"\n        permission: \"push\"\n      - repository: \"infrastructure\"\n        permission: \"pull\"  # Read-only\n      - repository: \"shared-components\"\n        permission: \"maintain\"\n\n  product-team-beta:\n    name: \"Product Team Beta\"\n    description: \"Beta product development team\"\n    privacy: \"closed\"\n\n    members:\n      - username: \"beta-lead\"\n        role: \"maintainer\"\n      - username: \"beta-fullstack-1\"\n        role: \"member\"\n      - username: \"beta-fullstack-2\"\n        role: \"member\"\n\n    repositories:\n      - repository: \"beta-app\"\n        permission: \"push\"\n      - repository: \"beta-api\"\n        permission: \"push\"\n      - repository: \"infrastructure\"\n        permission: \"pull\"\n      - repository: \"shared-components\"\n        permission: \"maintain\"\n\n  # Cross-functional teams\n  security-team:\n    name: \"Security Team\"\n    description: \"Application and infrastructure security\"\n    privacy: \"secret\"  # Hidden team\n\n    members:\n      - username: \"security-lead\"\n        role: \"maintainer\"\n      - username: \"security-engineer-1\"\n        role: \"member\"\n      - username: \"security-engineer-2\"\n        role: \"member\"\n\n    repositories:\n      # Admin access to audit all repos\n      - repository: \"infrastructure\"\n        permission: \"maintain\"\n      - repository: \"alpha-frontend\"\n        permission: \"maintain\"\n      - repository: \"alpha-backend\"\n        permission: \"maintain\"\n      - repository: \"beta-app\"\n        permission: \"maintain\"\n      - repository: \"beta-api\"\n        permission: \"maintain\"\n      # Exclusive access to security tools\n      - repository: \"security-tools\"\n        permission: \"admin\"\n      - repository: \"vulnerability-tracking\"\n        permission: \"admin\"\n\n  qa-automation:\n    name: \"QA Automation\"\n    description: \"Quality assurance and test automation\"\n    privacy: \"closed\"\n\n    members:\n      - username: \"qa-lead\"\n        role: \"maintainer\"\n      - username: \"qa-engineer-1\"\n        role: \"member\"\n      - username: \"qa-engineer-2\"\n        role: \"member\"\n\n    repositories:\n      # Write access to test repositories\n      - repository: \"qa-automation-tests\"\n        permission: \"push\"\n      # Read access to product repos\n      - repository: \"alpha-frontend\"\n        permission: \"pull\"\n      - repository: \"alpha-backend\"\n        permission: \"pull\"\n      - repository: \"beta-app\"\n        permission: \"pull\"\n      - repository: \"beta-api\"\n        permission: \"pull\"\n\n  # External access\n  external-partners:\n    name: \"External Partners\"\n    description: \"External contractors and partners\"\n    privacy: \"closed\"\n\n    members:\n      - username: \"partner-contractor-1\"\n        role: \"member\"\n      - username: \"partner-contractor-2\"\n        role: \"member\"\n\n    repositories:\n      - repository: \"partner-integration-project\"\n        permission: \"push\"\n      - repository: \"shared-api-docs\"\n        permission: \"pull\"\n</code></pre>"},{"location":"examples/advanced-config/#monorepo-with-rulesets","title":"Monorepo with Rulesets","text":"<p>Protect different paths in a monorepo.</p> configs/repositories.yaml<pre><code>repositories:\n  monorepo:\n    name: \"company-monorepo\"\n    description: \"Company-wide monorepo\"\n    visibility: \"private\"\n\n    has_issues: true\n    has_projects: true\n\n    allow_squash_merge: true\n    delete_branch_on_merge: true\n\n    rulesets:\n      # Protect main branch strictly\n      main-protection:\n        name: \"Main Branch Protection\"\n        enforcement: \"active\"\n        branch_patterns:\n          - \"main\"\n\n        rules:\n          update: true\n          deletion: true\n          required_linear_history: true\n          non_fast_forward: true\n\n          pull_request:\n            required_approving_review_count: 2\n            require_code_owner_review: true  # Use CODEOWNERS file\n            required_review_thread_resolution: true\n\n          required_status_checks:\n            strict_required_status_checks_policy: true\n            required_checks:\n              - context: \"build\"\n              - context: \"test\"\n              - context: \"lint\"\n\n      # Protect release branches\n      release-protection:\n        name: \"Release Branch Protection\"\n        enforcement: \"active\"\n        branch_patterns:\n          - \"release/*\"\n\n        rules:\n          update: true\n          deletion: true\n          non_fast_forward: true\n\n          pull_request:\n            required_approving_review_count: 3  # Stricter for releases\n            require_code_owner_review: true\n            require_last_push_approval: true\n\n          required_status_checks:\n            strict_required_status_checks_policy: true\n            required_checks:\n              - context: \"build\"\n              - context: \"test\"\n              - context: \"integration-test\"\n              - context: \"security-scan\"\n</code></pre> <p>With CODEOWNERS file for path-based reviews:</p> CODEOWNERS<pre><code># Default owners for everything\n* @company/engineering-leadership\n\n# Frontend code\n/apps/frontend/ @company/frontend-team\n/packages/ui/ @company/frontend-team\n\n# Backend code\n/apps/backend/ @company/backend-team\n/packages/api/ @company/backend-team\n\n# Infrastructure\n/infrastructure/ @company/platform-team\n/terraform/ @company/platform-team\n/kubernetes/ @company/platform-team\n\n# Security-sensitive paths\n/apps/*/auth/ @company/security-team\n/packages/auth/ @company/security-team\n/.github/workflows/ @company/platform-team @company/security-team\n</code></pre>"},{"location":"examples/advanced-config/#dynamic-configuration-with-templating","title":"Dynamic Configuration with Templating","text":"<p>Use external data sources to generate configurations.</p>"},{"location":"examples/advanced-config/#using-external-script","title":"Using External Script","text":"locals.tf<pre><code>locals {\n  # Load from external script\n  repos_json = jsondecode(\n    file(\"${path.module}/scripts/generate-repos.json\")\n  )\n\n  # Or execute a script\n  repos_from_script = jsondecode(\n    data.external.repos.result.repositories\n  )\n}\n\ndata \"external\" \"repos\" {\n  program = [\"python3\", \"${path.module}/scripts/generate-repos.py\"]\n}\n</code></pre> scripts/generate-repos.py<pre><code>#!/usr/bin/env python3\nimport json\nimport sys\n\n# Generate repositories dynamically\nrepos = {\n    \"repositories\": json.dumps({\n        f\"service-{i}\": {\n            \"name\": f\"service-{i}\",\n            \"description\": f\"Microservice {i}\",\n            \"visibility\": \"private\"\n        }\n        for i in range(1, 11)  # Create 10 services\n    })\n}\n\nprint(json.dumps(repos))\n</code></pre>"},{"location":"examples/advanced-config/#compliance-and-audit","title":"Compliance and Audit","text":"<p>Configuration for regulated environments.</p> configs/repositories.yaml<pre><code>repositories:\n  financial-service:\n    name: \"financial-service\"\n    description: \"Financial services application - SOC2 compliant\"\n    visibility: \"private\"\n\n    vulnerability_alerts: true\n\n    topics:\n      - \"finance\"\n      - \"pci-compliant\"\n      - \"soc2\"\n\n    rulesets:\n      compliance-ruleset:\n        name: \"Compliance Enforcement\"\n        enforcement: \"active\"\n        branch_patterns:\n          - \"main\"\n          - \"release/*\"\n          - \"hotfix/*\"\n\n        rules:\n          # Require all commits to be signed\n          required_signatures: true\n\n          # Require linear history for audit\n          required_linear_history: true\n\n          # Strict PR requirements\n          update: true\n          deletion: true\n          non_fast_forward: true\n\n          pull_request:\n            # Require multiple approvals\n            required_approving_review_count: 2\n\n            # Require code owner approval\n            require_code_owner_review: true\n\n            # Require approval after last push\n            require_last_push_approval: true\n\n            # All conversations must be resolved\n            required_review_thread_resolution: true\n\n            # Dismiss stale reviews\n            dismiss_stale_reviews_on_push: true\n\n          # Comprehensive CI checks\n          required_status_checks:\n            strict_required_status_checks_policy: true\n            required_checks:\n              - context: \"build\"\n              - context: \"unit-tests\"\n              - context: \"integration-tests\"\n              - context: \"security-scan\"\n              - context: \"dependency-check\"\n              - context: \"license-check\"\n              - context: \"sast-scan\"\n              - context: \"dast-scan\"\n              - context: \"compliance-check\"\n</code></pre>"},{"location":"examples/advanced-config/#next-steps","title":"Next Steps","text":"<ul> <li>Best Practices - Optimization tips</li> <li>Basic Setup - Simpler examples</li> <li>YAML Schema Reference - Complete schema</li> </ul>"},{"location":"examples/basic-setup/","title":"Basic Setup","text":""},{"location":"examples/basic-setup/#basic-setup-examples","title":"Basic Setup Examples","text":"<p>This page provides basic, real-world examples for common use cases.</p>"},{"location":"examples/basic-setup/#example-1-simple-public-repository","title":"Example 1: Simple Public Repository","text":"<p>A basic public repository with minimal configuration.</p> configs/repositories.yaml<pre><code>repositories:\n  simple-project:\n    name: \"simple-project\"\n    description: \"A simple open-source project\"\n    visibility: \"public\"\n\n    # Basic features\n    has_issues: true\n    has_wiki: false\n    has_projects: false\n\n    # Clean merge strategy\n    allow_merge_commit: false\n    allow_squash_merge: true\n    allow_rebase_merge: false\n    delete_branch_on_merge: true\n\n    topics:\n      - \"opensource\"\n      - \"example\"\n</code></pre> <p>Use case: Simple open-source project without branch protection.</p>"},{"location":"examples/basic-setup/#example-2-repository-with-branch-protection","title":"Example 2: Repository with Branch Protection","text":"<p>Public repository with basic branch protection.</p> configs/repositories.yaml<pre><code>repositories:\n  protected-repo:\n    name: \"protected-repo\"\n    description: \"Repository with branch protection\"\n    visibility: \"public\"\n\n    has_issues: true\n    has_discussions: true\n    vulnerability_alerts: true\n\n    allow_merge_commit: false\n    allow_squash_merge: true\n    allow_rebase_merge: false\n    delete_branch_on_merge: true\n\n    topics:\n      - \"protected\"\n      - \"ci-cd\"\n\n    # Branch protection\n    rulesets:\n      main-protection:\n        name: \"Protect Main\"\n        enforcement: \"active\"\n        branch_patterns:\n          - \"main\"\n\n        rules:\n          update: true  # Require PR\n          deletion: true  # Block deletion\n          non_fast_forward: true  # No force push\n\n          pull_request:\n            required_approving_review_count: 1\n            dismiss_stale_reviews_on_push: true\n</code></pre> <p>Use case: Open-source project requiring code review.</p>"},{"location":"examples/basic-setup/#example-3-private-repository-with-team-access","title":"Example 3: Private Repository with Team Access","text":"<p>Private repository with team-based access control.</p> repos/configs/repositories.yaml<pre><code>repositories:\n  internal-tool:\n    name: \"internal-tool\"\n    description: \"Internal development tool\"\n    visibility: \"private\"\n\n    has_issues: true\n    has_wiki: true\n\n    vulnerability_alerts: true\n\n    rulesets:\n      main-protection:\n        name: \"Main Protection\"\n        enforcement: \"active\"\n        branch_patterns:\n          - \"main\"\n\n        rules:\n          update: true\n          deletion: true\n          non_fast_forward: true\n\n          pull_request:\n            required_approving_review_count: 1\n            require_code_owner_review: false\n</code></pre> teams/configs/teams.yaml<pre><code>teams:\n  developers:\n    name: \"Developers\"\n    description: \"Development team\"\n    privacy: \"closed\"\n\n    members:\n      - username: \"alice\"\n        role: \"maintainer\"\n      - username: \"bob\"\n        role: \"member\"\n\n    repositories:\n      - repository: \"internal-tool\"\n        permission: \"push\"\n</code></pre> <p>Use case: Internal tool with team access.</p>"},{"location":"examples/basic-setup/#example-4-multi-repository-setup","title":"Example 4: Multi-Repository Setup","text":"<p>Multiple related repositories with consistent settings.</p> configs/repositories.yaml<pre><code>repositories:\n  # Frontend repository\n  web-frontend:\n    name: \"web-frontend\"\n    description: \"Web application frontend\"\n    visibility: \"private\"\n\n    has_issues: true\n    allow_squash_merge: true\n    delete_branch_on_merge: true\n\n    topics:\n      - \"frontend\"\n      - \"react\"\n      - \"typescript\"\n\n    rulesets:\n      main-protection:\n        name: \"Main Protection\"\n        enforcement: \"active\"\n        branch_patterns:\n          - \"main\"\n        rules:\n          update: true\n          deletion: true\n          pull_request:\n            required_approving_review_count: 1\n\n  # Backend repository\n  web-backend:\n    name: \"web-backend\"\n    description: \"Web application backend API\"\n    visibility: \"private\"\n\n    has_issues: true\n    allow_squash_merge: true\n    delete_branch_on_merge: true\n\n    topics:\n      - \"backend\"\n      - \"nodejs\"\n      - \"api\"\n\n    rulesets:\n      main-protection:\n        name: \"Main Protection\"\n        enforcement: \"active\"\n        branch_patterns:\n          - \"main\"\n        rules:\n          update: true\n          deletion: true\n          pull_request:\n            required_approving_review_count: 1\n            required_review_thread_resolution: true\n\n  # Shared infrastructure\n  infrastructure:\n    name: \"infrastructure\"\n    description: \"Shared infrastructure code\"\n    visibility: \"private\"\n\n    has_issues: true\n    allow_squash_merge: true\n\n    topics:\n      - \"infrastructure\"\n      - \"terraform\"\n      - \"aws\"\n\n    rulesets:\n      main-protection:\n        name: \"Main Protection\"\n        enforcement: \"active\"\n        branch_patterns:\n          - \"main\"\n        rules:\n          update: true\n          deletion: true\n          pull_request:\n            required_approving_review_count: 2  # Higher for infra\n            require_code_owner_review: true\n</code></pre> <p>Use case: Full-stack application with frontend, backend, and infrastructure.</p>"},{"location":"examples/basic-setup/#example-5-basic-team-structure","title":"Example 5: Basic Team Structure","text":"<p>Simple team structure for a small organization.</p> configs/teams.yaml<pre><code>teams:\n  # Admin team\n  admins:\n    name: \"Administrators\"\n    description: \"Organization administrators\"\n    privacy: \"closed\"\n\n    members:\n      - username: \"admin1\"\n        role: \"maintainer\"\n      - username: \"admin2\"\n        role: \"maintainer\"\n\n    repositories:\n      - repository: \"web-frontend\"\n        permission: \"admin\"\n      - repository: \"web-backend\"\n        permission: \"admin\"\n      - repository: \"infrastructure\"\n        permission: \"admin\"\n\n  # Developer team\n  developers:\n    name: \"Developers\"\n    description: \"Development team\"\n    privacy: \"closed\"\n\n    members:\n      - username: \"dev1\"\n        role: \"member\"\n      - username: \"dev2\"\n        role: \"member\"\n      - username: \"dev3\"\n        role: \"member\"\n\n    repositories:\n      - repository: \"web-frontend\"\n        permission: \"push\"\n      - repository: \"web-backend\"\n        permission: \"push\"\n      - repository: \"infrastructure\"\n        permission: \"pull\"  # Read-only\n\n  # External contractors\n  contractors:\n    name: \"External Contractors\"\n    description: \"Temporary external access\"\n    privacy: \"closed\"\n\n    members:\n      - username: \"contractor1\"\n        role: \"member\"\n\n    repositories:\n      - repository: \"web-frontend\"\n        permission: \"push\"\n</code></pre> <p>Use case: Small team with admins, developers, and contractors.</p>"},{"location":"examples/basic-setup/#example-6-organization-settings","title":"Example 6: Organization Settings","text":"<p>Basic organization configuration.</p> org_configurations/locals.tf<pre><code>locals {\n  environment = {\n    github = {\n      organization = {\n        billing_email = \"billing@example.com\"\n        description   = \"Example Organization - DevOps Automation\"\n\n        # Restrict member permissions\n        members_can_create_repositories         = false\n        members_can_create_public_repositories  = false\n        members_can_create_private_repositories = false\n        members_can_create_pages                = false\n        members_can_fork_private_repositories   = false\n      }\n    }\n  }\n}\n</code></pre> <p>Use case: Secure organization with restricted member permissions.</p>"},{"location":"examples/basic-setup/#example-7-status-checks-integration","title":"Example 7: Status Checks Integration","text":"<p>Repository with required CI checks.</p> configs/repositories.yaml<pre><code>repositories:\n  ci-integrated-app:\n    name: \"ci-integrated-app\"\n    description: \"Application with CI/CD pipeline\"\n    visibility: \"public\"\n\n    has_issues: true\n    vulnerability_alerts: true\n\n    allow_squash_merge: true\n    delete_branch_on_merge: true\n\n    topics:\n      - \"ci-cd\"\n      - \"github-actions\"\n\n    rulesets:\n      main-protection:\n        name: \"Main with CI\"\n        enforcement: \"active\"\n        branch_patterns:\n          - \"main\"\n\n        rules:\n          update: true\n          deletion: true\n          non_fast_forward: true\n\n          pull_request:\n            required_approving_review_count: 1\n            dismiss_stale_reviews_on_push: true\n\n          # Required status checks\n          required_status_checks:\n            strict_required_status_checks_policy: true\n            required_checks:\n              - context: \"build\"\n              - context: \"test\"\n              - context: \"lint\"\n</code></pre> <p>Use case: Repository with CI/CD requiring checks to pass.</p>"},{"location":"examples/basic-setup/#example-8-multiple-branch-patterns","title":"Example 8: Multiple Branch Patterns","text":"<p>Protecting multiple branches with different rules.</p> configs/repositories.yaml<pre><code>repositories:\n  multi-branch-app:\n    name: \"multi-branch-app\"\n    description: \"App with multiple protected branches\"\n    visibility: \"private\"\n\n    rulesets:\n      # Protect main branch (strict)\n      main-protection:\n        name: \"Main Protection\"\n        enforcement: \"active\"\n        branch_patterns:\n          - \"main\"\n\n        rules:\n          update: true\n          deletion: true\n          non_fast_forward: true\n\n          pull_request:\n            required_approving_review_count: 2\n            require_code_owner_review: true\n            required_review_thread_resolution: true\n\n      # Protect release branches (moderate)\n      release-protection:\n        name: \"Release Protection\"\n        enforcement: \"active\"\n        branch_patterns:\n          - \"release/*\"\n\n        rules:\n          update: true\n          deletion: true\n          non_fast_forward: true\n\n          pull_request:\n            required_approving_review_count: 1\n            dismiss_stale_reviews_on_push: true\n\n      # Protect develop branch (relaxed)\n      develop-protection:\n        name: \"Develop Protection\"\n        enforcement: \"active\"\n        branch_patterns:\n          - \"develop\"\n\n        rules:\n          update: true\n          deletion: false  # Allow deletion\n          non_fast_forward: false  # Allow force push\n\n          pull_request:\n            required_approving_review_count: 1\n</code></pre> <p>Use case: Git flow with different protection levels.</p>"},{"location":"examples/basic-setup/#next-steps","title":"Next Steps","text":"<ul> <li>Advanced Configuration - Complex scenarios</li> <li>Best Practices - Tips and recommendations</li> <li>Modules Documentation - Detailed reference</li> </ul>"},{"location":"examples/best-practices/","title":"Best Practices","text":""},{"location":"examples/best-practices/#best-practices","title":"Best Practices","text":"<p>Recommendations and tips for effective GitHub organization management with Terraform.</p>"},{"location":"examples/best-practices/#repository-configuration","title":"Repository Configuration","text":""},{"location":"examples/best-practices/#naming-conventions","title":"Naming Conventions","text":"<p>Use consistent naming patterns:</p> <pre><code># \u2705 Good: Clear, consistent naming\nrepositories:\n  web-frontend:\n    name: \"web-frontend\"\n\n  api-backend:\n    name: \"api-backend\"\n\n  infra-terraform:\n    name: \"infra-terraform\"\n\n# \u274c Bad: Inconsistent naming\nrepositories:\n  WebFrontend:\n    name: \"WebFrontend\"\n\n  backend_API:\n    name: \"backend_API\"\n\n  terraform:\n    name: \"terraform\"\n</code></pre> <p>Recommended patterns: - <code>{product}-{component}</code> - e.g., <code>shop-frontend</code>, <code>shop-api</code> - <code>{environment}-{service}</code> - e.g., <code>prod-payment-service</code> - <code>{team}-{project}</code> - e.g., <code>platform-monitoring</code></p>"},{"location":"examples/best-practices/#topics","title":"Topics","text":"<p>Use topics consistently for discoverability:</p> <pre><code>topics:\n  # Language/framework\n  - \"typescript\"\n  - \"react\"\n\n  # Purpose\n  - \"frontend\"\n  - \"web-app\"\n\n  # Team/ownership\n  - \"team-alpha\"\n\n  # Environment\n  - \"production\"\n\n  # Compliance/security\n  - \"soc2-compliant\"\n</code></pre>"},{"location":"examples/best-practices/#merge-strategies","title":"Merge Strategies","text":"<p>Choose one merge strategy for consistency:</p> <pre><code># \u2705 Recommended: Squash only (clean history)\nallow_merge_commit: false\nallow_squash_merge: true\nallow_rebase_merge: false\ndelete_branch_on_merge: true\n\n# Alternative: Rebase only (linear history)\nallow_merge_commit: false\nallow_squash_merge: false\nallow_rebase_merge: true\ndelete_branch_on_merge: true\n</code></pre>"},{"location":"examples/best-practices/#branch-protection","title":"Branch Protection","text":""},{"location":"examples/best-practices/#protection-levels","title":"Protection Levels","text":"<p>Use tiered protection based on criticality:</p> <pre><code># Production repositories - Strict\nrulesets:\n  main-protection:\n    rules:\n      pull_request:\n        required_approving_review_count: 2\n        require_code_owner_review: true\n        require_last_push_approval: true\n        required_review_thread_resolution: true\n\n# Development repositories - Moderate\nrulesets:\n  main-protection:\n    rules:\n      pull_request:\n        required_approving_review_count: 1\n        dismiss_stale_reviews_on_push: true\n\n# Sandbox repositories - Minimal\nrulesets:\n  main-protection:\n    rules:\n      pull_request:\n        required_approving_review_count: 1\n</code></pre>"},{"location":"examples/best-practices/#status-checks","title":"Status Checks","text":"<p>Always require CI to pass:</p> <pre><code>required_status_checks:\n  strict_required_status_checks_policy: true\n  required_checks:\n    # Build and test\n    - context: \"build\"\n    - context: \"test\"\n\n    # Code quality\n    - context: \"lint\"\n\n    # Security (recommended)\n    - context: \"security-scan\"\n\n    # Coverage (optional)\n    # - context: \"coverage\"\n</code></pre>"},{"location":"examples/best-practices/#branch-patterns","title":"Branch Patterns","text":"<p>Protect all important branches:</p> <pre><code># Protect main\nbranch_patterns:\n  - \"main\"\n\n# Protect main and release branches\nbranch_patterns:\n  - \"main\"\n  - \"release/*\"\n  - \"hotfix/*\"\n\n# Exclude WIP branches\nbranch_patterns:\n  include:\n    - \"main\"\n  exclude:\n    - \"*/wip\"\n    - \"experimental-*\"\n</code></pre>"},{"location":"examples/best-practices/#team-management","title":"Team Management","text":""},{"location":"examples/best-practices/#team-structure","title":"Team Structure","text":"<p>Organize teams by function, not project:</p> <pre><code># \u2705 Good: Functional teams\nteams:\n  platform-engineering:\n    # Manages infrastructure across all projects\n\n  frontend-engineers:\n    # Manages all frontend code\n\n  backend-engineers:\n    # Manages all backend services\n\n# \u274c Bad: Project-based teams\nteams:\n  project-alpha:\n    # Isolated to one project\n\n  project-beta:\n    # Isolated to one project\n</code></pre>"},{"location":"examples/best-practices/#permission-levels","title":"Permission Levels","text":"<p>Use principle of least privilege:</p> <pre><code>teams:\n  developers:\n    repositories:\n      # \u2705 Good: Appropriate permissions\n      - repository: \"team-owned-service\"\n        permission: \"push\"\n\n      - repository: \"shared-library\"\n        permission: \"maintain\"\n\n      - repository: \"infrastructure\"\n        permission: \"pull\"  # Read-only\n\n      # \u274c Bad: Too much access\n      # - repository: \"infrastructure\"\n      #   permission: \"admin\"\n</code></pre> <p>Permission guidelines: - <code>pull</code> - For dependencies, documentation - <code>push</code> - For active development - <code>maintain</code> - For shared libraries, tools - <code>admin</code> - Only for team leads, platform team</p>"},{"location":"examples/best-practices/#team-roles","title":"Team Roles","text":"<p>Assign multiple maintainers for redundancy:</p> <pre><code>members:\n  # \u2705 Good: Multiple maintainers\n  - username: \"lead1\"\n    role: \"maintainer\"\n  - username: \"lead2\"\n    role: \"maintainer\"\n  - username: \"dev1\"\n    role: \"member\"\n\n  # \u274c Bad: Single maintainer\n  # - username: \"only-lead\"\n  #   role: \"maintainer\"\n</code></pre>"},{"location":"examples/best-practices/#external-collaborators","title":"External Collaborators","text":"<p>Separate external users into dedicated teams:</p> <pre><code>external-contractors:\n  name: \"External Contractors\"\n  description: \"Temporary external access - Review quarterly\"\n  privacy: \"closed\"\n\n  members:\n    - username: \"contractor-name\"\n      role: \"member\"  # Never maintainer\n\n  repositories:\n    # Grant minimal access\n    - repository: \"specific-project\"\n      permission: \"push\"\n    # No access to infrastructure\n</code></pre>"},{"location":"examples/best-practices/#configuration-management","title":"Configuration Management","text":""},{"location":"examples/best-practices/#yaml-organization","title":"YAML Organization","text":"<p>Keep YAML files organized and commented:</p> <pre><code>repositories:\n  # Production Services\n  # Critical path - requires 2 approvals\n\n  payment-service:\n    name: \"payment-service\"\n    description: \"Payment processing service - PCI compliant\"\n    # ... configuration\n\n  # Internal Tools\n  # Lower criticality - 1 approval sufficient\n\n  internal-dashboard:\n    name: \"internal-dashboard\"\n    description: \"Internal metrics dashboard\"\n    # ... configuration\n</code></pre>"},{"location":"examples/best-practices/#version-control","title":"Version Control","text":"<p>Treat infrastructure as code:</p> <pre><code># \u2705 Good: Commit with context\ngit add configs/repositories.yaml\ngit commit -m \"Add payment-service repository for PROJ-123\n\n- Configured with 2 required approvals\n- Added PCI compliance topics\n- Restricted merge to squash only\"\ngit push\n\n# \u274c Bad: Vague commits\ngit commit -m \"update repos\"\n</code></pre>"},{"location":"examples/best-practices/#change-management","title":"Change Management","text":"<p>Follow a process for changes:</p> <ol> <li> <p>Create a branch </p><pre><code>git checkout -b add-new-service\n</code></pre><p></p> </li> <li> <p>Make changes to YAML </p><pre><code># Edit configs/repositories.yaml\n</code></pre><p></p> </li> <li> <p>Plan and review </p><pre><code>terraform plan &gt; plan.txt\n# Review plan.txt\n</code></pre><p></p> </li> <li> <p>Open pull request </p><pre><code>git push origin add-new-service\n# Create PR with plan output\n</code></pre><p></p> </li> <li> <p>Get approval and merge</p> </li> <li> <p>Apply changes </p><pre><code>terraform apply\n</code></pre><p></p> </li> </ol>"},{"location":"examples/best-practices/#security","title":"Security","text":""},{"location":"examples/best-practices/#token-security","title":"Token Security","text":"<p>Never commit tokens:</p> <pre><code># \u2705 Good: Environment variable\nexport GITHUB_TOKEN=\"ghp_...\"\n\n# \u2705 Good: CI/CD secret\n# Set in GitHub Actions secrets\n\n# \u274c Bad: Hardcoded\nprovider \"github\" {\n  token = \"ghp_abc123...\"  # NEVER DO THIS\n}\n</code></pre>"},{"location":"examples/best-practices/#state-file-security","title":"State File Security","text":"<p>Protect state files:</p> <pre><code># \u2705 Good: Encrypted remote backend\nterraform {\n  backend \"s3\" {\n    bucket  = \"terraform-state\"\n    key     = \"github/terraform.tfstate\"\n    encrypt = true  # Enable encryption\n  }\n}\n\n# \u274c Bad: Local state in version control\n# Don't commit terraform.tfstate\n</code></pre> <p>Add to <code>.gitignore</code>:</p> <pre><code># Terraform\n.terraform/\n*.tfstate\n*.tfstate.*\n*.tfvars\n.terraform.lock.hcl\n\n# Sensitive files\n*.pem\n*.key\n</code></pre>"},{"location":"examples/best-practices/#audit-logging","title":"Audit Logging","text":"<p>Enable and monitor audit logs:</p> <ol> <li>Go to organization settings \u2192 Audit log</li> <li>Review regularly for unexpected changes</li> <li>Export logs for compliance</li> </ol>"},{"location":"examples/best-practices/#secrets-management","title":"Secrets Management","text":"<p>Use secrets manager for sensitive values:</p> <pre><code># \u2705 Good: Load from secrets manager\ndata \"aws_secretsmanager_secret_version\" \"github_token\" {\n  secret_id = \"terraform/github-token\"\n}\n\nprovider \"github\" {\n  token = data.aws_secretsmanager_secret_version.github_token.secret_string\n}\n</code></pre>"},{"location":"examples/best-practices/#terraform-practices","title":"Terraform Practices","text":""},{"location":"examples/best-practices/#state-management","title":"State Management","text":"<p>Use remote state for teams:</p> <pre><code># \u2705 Good: Remote state\nterraform {\n  backend \"remote\" {\n    organization = \"your-org\"\n    workspaces {\n      name = \"github-management\"\n    }\n  }\n}\n\n# \u274c Bad: Local state for teams\n# terraform {\n#   backend \"local\" {}\n# }\n</code></pre>"},{"location":"examples/best-practices/#module-organization","title":"Module Organization","text":"<p>Keep modules independent:</p> <pre><code>github-org-management/\n\u251c\u2500\u2500 org_configurations/\n\u2502   \u251c\u2500\u2500 backend.tf  # Independent state\n\u2502   \u2514\u2500\u2500 ...\n\u251c\u2500\u2500 repos/\n\u2502   \u251c\u2500\u2500 backend.tf  # Independent state\n\u2502   \u2514\u2500\u2500 ...\n\u251c\u2500\u2500 teams/\n\u2502   \u251c\u2500\u2500 backend.tf  # Independent state\n\u2502   \u2514\u2500\u2500 ...\n</code></pre>"},{"location":"examples/best-practices/#planning","title":"Planning","text":"<p>Always plan before applying:</p> <pre><code># \u2705 Good workflow\nterraform plan -out=plan.tfplan\n# Review plan\nterraform apply plan.tfplan\n\n# \u274c Bad: Blind apply\nterraform apply -auto-approve  # Only for CI/CD\n</code></pre>"},{"location":"examples/best-practices/#documentation","title":"Documentation","text":"<p>Document your configuration:</p> <pre><code>repositories:\n  critical-service:\n    name: \"critical-service\"\n    description: \"Critical service - requires 24/7 on-call\"\n\n    # SECURITY-123: Increased to 2 approvals for SOC2 compliance\n    rulesets:\n      main-protection:\n        rules:\n          pull_request:\n            required_approving_review_count: 2  # Was 1, changed 2024-01-15\n</code></pre>"},{"location":"examples/best-practices/#testing","title":"Testing","text":""},{"location":"examples/best-practices/#test-changes-in-dev-first","title":"Test Changes in Dev First","text":"<p>Always test in a non-production environment:</p> <pre><code># Test in dev workspace\nterraform workspace select dev\nterraform apply\n\n# Verify in GitHub\n\n# Then apply to prod\nterraform workspace select prod\nterraform apply\n</code></pre>"},{"location":"examples/best-practices/#validate-before-deploy","title":"Validate Before Deploy","text":"<p>Use validation tools:</p> <pre><code># Format check\nterraform fmt -check\n\n# Validate syntax\nterraform validate\n\n# Security scan (optional)\ntfsec .\n</code></pre>"},{"location":"examples/best-practices/#dry-run-with-evaluate-mode","title":"Dry-Run with Evaluate Mode","text":"<p>Test rulesets without enforcing:</p> <pre><code>rulesets:\n  new-policy:\n    name: \"New Policy (Testing)\"\n    enforcement: \"evaluate\"  # Test first\n    # ... configuration\n\n    # After testing, change to:\n    # enforcement: \"active\"\n</code></pre>"},{"location":"examples/best-practices/#cicd-integration","title":"CI/CD Integration","text":""},{"location":"examples/best-practices/#automated-validation","title":"Automated Validation","text":"<p>Validate on every pull request:</p> <pre><code>name: Terraform Validation\non: [pull_request]\n\njobs:\n  validate:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v4\n      - uses: hashicorp/setup-terraform@v3\n\n      - name: Terraform Format\n        run: terraform fmt -check -recursive\n\n      - name: Terraform Init\n        run: terraform init\n\n      - name: Terraform Validate\n        run: terraform validate\n</code></pre>"},{"location":"examples/best-practices/#plan-on-pr","title":"Plan on PR","text":"<p>Show plan output in pull requests:</p> <pre><code>- name: Terraform Plan\n  id: plan\n  run: terraform plan -no-color\n  continue-on-error: true\n\n- name: Comment PR\n  uses: actions/github-script@v7\n  with:\n    script: |\n      github.rest.issues.createComment({\n        issue_number: context.issue.number,\n        owner: context.repo.owner,\n        repo: context.repo.repo,\n        body: `#### Terraform Plan\\n\\`\\`\\`\\n${{ steps.plan.outputs.stdout }}\\n\\`\\`\\``\n      })\n</code></pre>"},{"location":"examples/best-practices/#automated-apply","title":"Automated Apply","text":"<p>Only on main branch:</p> <pre><code>- name: Terraform Apply\n  if: github.ref == 'refs/heads/main' &amp;&amp; github.event_name == 'push'\n  run: terraform apply -auto-approve\n</code></pre>"},{"location":"examples/best-practices/#monitoring-and-maintenance","title":"Monitoring and Maintenance","text":""},{"location":"examples/best-practices/#regular-reviews","title":"Regular Reviews","text":"<p>Schedule regular reviews:</p> <ul> <li>Weekly: Review new repositories and teams</li> <li>Monthly: Audit team memberships and permissions</li> <li>Quarterly: Review external collaborator access</li> <li>Annually: Full security audit</li> </ul>"},{"location":"examples/best-practices/#drift-detection","title":"Drift Detection","text":"<p>Check for manual changes:</p> <pre><code># Run regularly (e.g., daily via cron/CI)\nterraform plan -detailed-exitcode\n\n# Exit code 2 = drift detected\nif [ $? -eq 2 ]; then\n  echo \"Drift detected! Manual changes were made.\"\n  # Send alert\nfi\n</code></pre>"},{"location":"examples/best-practices/#documentation_1","title":"Documentation","text":"<p>Keep documentation updated:</p> <ul> <li>Document the purpose of each repository</li> <li>Maintain team structure diagrams</li> <li>Keep runbooks for common operations</li> <li>Document exceptions and special cases</li> </ul>"},{"location":"examples/best-practices/#common-pitfalls","title":"Common Pitfalls","text":""},{"location":"examples/best-practices/#avoid","title":"Avoid","text":"<p>\u274c Committing tokens to version control </p><pre><code># Add to .gitignore immediately\necho \"*.tfvars\" &gt;&gt; .gitignore\necho \"*.pem\" &gt;&gt; .gitignore\n</code></pre><p></p> <p>\u274c Ignoring plan output </p><pre><code># Always review plan before apply\nterraform plan | less\n</code></pre><p></p> <p>\u274c Using admin permissions everywhere </p><pre><code># Give minimal necessary permissions\npermission: \"pull\"  # Not \"admin\" by default\n</code></pre><p></p> <p>\u274c No branch protection </p><pre><code># Always protect main branch\nrulesets:\n  main-protection:\n    # ... protection rules\n</code></pre><p></p> <p>\u274c Single maintainer </p><pre><code># Have backup maintainers\nmembers:\n  - username: \"lead1\"\n    role: \"maintainer\"\n  - username: \"lead2\"\n    role: \"maintainer\"\n</code></pre><p></p>"},{"location":"examples/best-practices/#summary-checklist","title":"Summary Checklist","text":""},{"location":"examples/best-practices/#repository-setup","title":"Repository Setup","text":"<ul> <li>[ ] Clear naming convention</li> <li>[ ] Appropriate visibility (public/private)</li> <li>[ ] Useful description</li> <li>[ ] Relevant topics</li> <li>[ ] Branch protection configured</li> <li>[ ] Status checks required</li> <li>[ ] Merge strategy defined</li> </ul>"},{"location":"examples/best-practices/#team-setup","title":"Team Setup","text":"<ul> <li>[ ] Teams organized by function</li> <li>[ ] Multiple maintainers assigned</li> <li>[ ] Principle of least privilege applied</li> <li>[ ] External collaborators separated</li> <li>[ ] Regular access reviews scheduled</li> </ul>"},{"location":"examples/best-practices/#security_1","title":"Security","text":"<ul> <li>[ ] Tokens stored securely</li> <li>[ ] State files encrypted</li> <li>[ ] <code>.gitignore</code> configured</li> <li>[ ] Audit logging enabled</li> <li>[ ] Regular security reviews</li> </ul>"},{"location":"examples/best-practices/#operations","title":"Operations","text":"<ul> <li>[ ] Remote state configured</li> <li>[ ] Changes via pull requests</li> <li>[ ] Plans reviewed before apply</li> <li>[ ] CI/CD validation configured</li> <li>[ ] Drift detection implemented</li> <li>[ ] Documentation maintained</li> </ul>"},{"location":"examples/best-practices/#next-steps","title":"Next Steps","text":"<ul> <li>Basic Setup Examples - Start with simple examples</li> <li>Advanced Configuration - Complex scenarios</li> <li>Deployment Guide - Deployment strategies</li> </ul>"},{"location":"guides/authentication/","title":"Authentication","text":""},{"location":"guides/authentication/#authentication-guide","title":"Authentication Guide","text":"<p>This guide covers different methods for authenticating Terraform with GitHub.</p>"},{"location":"guides/authentication/#overview","title":"Overview","text":"<p>Terraform needs credentials to interact with the GitHub API. There are two main approaches:</p> <ol> <li>Personal Access Token (PAT) - Simple, best for getting started</li> <li>GitHub App - More secure, best for production and teams</li> </ol>"},{"location":"guides/authentication/#option-1-personal-access-token-pat","title":"Option 1: Personal Access Token (PAT)","text":""},{"location":"guides/authentication/#when-to-use","title":"When to Use","text":"<ul> <li>Quick prototyping and testing</li> <li>Personal projects</li> <li>Learning and experimentation</li> <li>Single-user workflows</li> </ul>"},{"location":"guides/authentication/#advantages","title":"Advantages","text":"<ul> <li>\u2705 Simple to set up</li> <li>\u2705 Works immediately</li> <li>\u2705 No additional configuration needed</li> </ul>"},{"location":"guides/authentication/#disadvantages","title":"Disadvantages","text":"<ul> <li>\u274c Tied to a user account</li> <li>\u274c If user leaves, automation breaks</li> <li>\u274c Broad permissions</li> <li>\u274c Difficult to rotate securely</li> </ul>"},{"location":"guides/authentication/#creating-a-pat","title":"Creating a PAT","text":""},{"location":"guides/authentication/#classic-token-recommended-for-getting-started","title":"Classic Token (Recommended for Getting Started)","text":"<ol> <li> <p>Go to GitHub Settings \u2192 Developer settings \u2192 Personal access tokens \u2192 Tokens (classic)</p> </li> <li> <p>Click \"Generate new token (classic)\"</p> </li> <li> <p>Configure the token:</p> </li> <li>Note: <code>Terraform GitHub Management - Production</code></li> <li> <p>Expiration: Choose appropriate expiration (90 days recommended)</p> </li> <li> <p>Select scopes:</p> </li> </ol> <p>Required scopes:    - <code>repo</code> - Full control of private repositories    - <code>admin:org</code> - Full control of orgs and teams      - <code>write:org</code>      - <code>read:org</code>    - <code>delete_repo</code> - Delete repositories (if you plan to destroy resources)</p> <p>Optional scopes (based on your needs):    - <code>workflow</code> - Update GitHub Actions workflows    - <code>admin:org_hook</code> - Manage organization webhooks</p> <ol> <li> <p>Click \"Generate token\"</p> </li> <li> <p>Copy the token immediately (you won't see it again!)</p> </li> </ol>"},{"location":"guides/authentication/#fine-grained-token-more-secure","title":"Fine-grained Token (More Secure)","text":"<ol> <li> <p>Go to GitHub Settings \u2192 Developer settings \u2192 Personal access tokens \u2192 Fine-grained tokens</p> </li> <li> <p>Click \"Generate new token\"</p> </li> <li> <p>Configure:</p> </li> <li>Token name: <code>Terraform GitHub Management</code></li> <li>Expiration: 90 days</li> <li>Resource owner: Your organization</li> <li> <p>Repository access: All repositories</p> </li> <li> <p>Select permissions:</p> </li> </ol> <p>Repository permissions:    - Administration: Read and write    - Contents: Read and write    - Metadata: Read-only    - Pull requests: Read and write</p> <p>Organization permissions:    - Administration: Read and write    - Members: Read and write    - Organization plan: Read-only</p> <ol> <li>Generate and copy the token</li> </ol>"},{"location":"guides/authentication/#using-the-pat","title":"Using the PAT","text":""},{"location":"guides/authentication/#environment-variable-recommended","title":"Environment Variable (Recommended)","text":"<pre><code>export GITHUB_TOKEN=\"your_token_here\"\n</code></pre> <p>Make it persistent by adding to your shell configuration:</p> Bash (~/.bashrc)Zsh (~/.zshrc)Fish (~/.config/fish/config.fish) <pre><code>echo 'export GITHUB_TOKEN=\"your_token_here\"' &gt;&gt; ~/.bashrc\nsource ~/.bashrc\n</code></pre> <pre><code>echo 'export GITHUB_TOKEN=\"your_token_here\"' &gt;&gt; ~/.zshrc\nsource ~/.zshrc\n</code></pre> <pre><code>echo 'set -x GITHUB_TOKEN \"your_token_here\"' &gt;&gt; ~/.config/fish/config.fish\nsource ~/.config/fish/config.fish\n</code></pre>"},{"location":"guides/authentication/#provider-configuration","title":"Provider Configuration","text":"<p>The GitHub provider automatically reads from the <code>GITHUB_TOKEN</code> environment variable:</p> providers.tf<pre><code>provider \"github\" {\n  owner = \"your-org-name\"\n  # token is read from GITHUB_TOKEN env var\n}\n</code></pre> <p>Alternatively, you can specify it explicitly (not recommended for security):</p> providers.tf<pre><code>provider \"github\" {\n  owner = \"your-org-name\"\n  token = var.github_token  # Use a variable\n}\n</code></pre> variables.tf<pre><code>variable \"github_token\" {\n  description = \"GitHub Personal Access Token\"\n  type        = string\n  sensitive   = true\n}\n</code></pre> <p>Never Commit Tokens</p> <p>Never hardcode tokens in Terraform files or commit them to version control!</p>"},{"location":"guides/authentication/#option-2-github-app-recommended-for-production","title":"Option 2: GitHub App (Recommended for Production)","text":""},{"location":"guides/authentication/#when-to-use_1","title":"When to Use","text":"<ul> <li>Production environments</li> <li>Team workflows</li> <li>Organization-wide automation</li> <li>Enhanced security requirements</li> <li>Need for audit trails</li> </ul>"},{"location":"guides/authentication/#advantages_1","title":"Advantages","text":"<ul> <li>\u2705 Not tied to a user account</li> <li>\u2705 Granular permissions</li> <li>\u2705 Better audit logging</li> <li>\u2705 Can be organization-owned</li> <li>\u2705 Automatic token rotation</li> <li>\u2705 Fine-grained access control</li> </ul>"},{"location":"guides/authentication/#disadvantages_1","title":"Disadvantages","text":"<ul> <li>\u274c More complex setup</li> <li>\u274c Requires private key management</li> <li>\u274c Additional configuration needed</li> </ul>"},{"location":"guides/authentication/#creating-a-github-app","title":"Creating a GitHub App","text":"<ol> <li>Go to your organization settings</li> <li>Navigate to Developer settings \u2192 GitHub Apps</li> <li> <p>Click \"New GitHub App\"</p> </li> <li> <p>Configure the app:</p> </li> </ol> <p>Basic information:    - GitHub App name: <code>Terraform Organization Management</code>    - Homepage URL: <code>https://github.com/your-org</code>    - Webhook: Uncheck \"Active\" (not needed)</p> <p>Permissions:</p> <p>Repository permissions:    - Administration: Read and write    - Contents: Read and write    - Metadata: Read-only (automatically granted)    - Pull requests: Read and write</p> <p>Organization permissions:    - Administration: Read and write    - Members: Read and write</p> <ol> <li> <p>Click \"Create GitHub App\"</p> </li> <li> <p>Generate a private key:</p> </li> <li>Scroll to \"Private keys\" section</li> <li>Click \"Generate a private key\"</li> <li> <p>Save the downloaded <code>.pem</code> file securely</p> </li> <li> <p>Note the App ID (you'll need it for configuration)</p> </li> <li> <p>Install the app:</p> </li> <li>Go to app settings \u2192 \"Install App\"</li> <li>Install on your organization</li> <li>Grant access to all repositories (or specific ones)</li> <li>Note the Installation ID from the URL</li> </ol>"},{"location":"guides/authentication/#using-the-github-app","title":"Using the GitHub App","text":""},{"location":"guides/authentication/#provider-configuration_1","title":"Provider Configuration","text":"providers.tf<pre><code>provider \"github\" {\n  owner = \"your-org-name\"\n  app_auth {\n    id              = var.github_app_id\n    installation_id = var.github_app_installation_id\n    pem_file        = var.github_app_pem_file\n  }\n}\n</code></pre> variables.tf<pre><code>variable \"github_app_id\" {\n  description = \"GitHub App ID\"\n  type        = string\n}\n\nvariable \"github_app_installation_id\" {\n  description = \"GitHub App Installation ID\"\n  type        = string\n}\n\nvariable \"github_app_pem_file\" {\n  description = \"Path to GitHub App private key PEM file\"\n  type        = string\n  sensitive   = true\n}\n</code></pre>"},{"location":"guides/authentication/#setting-variables","title":"Setting Variables","text":"<p>Create a <code>terraform.tfvars</code> file (don't commit it!):</p> terraform.tfvars<pre><code>github_app_id              = \"123456\"\ngithub_app_installation_id = \"12345678\"\ngithub_app_pem_file        = \"/path/to/your-app.private-key.pem\"\n</code></pre> <p>Add to <code>.gitignore</code>:</p> .gitignore<pre><code>*.tfvars\n*.pem\n.terraform/\nterraform.tfstate\nterraform.tfstate.backup\n</code></pre>"},{"location":"guides/authentication/#using-environment-variables","title":"Using Environment Variables","text":"<p>Alternatively, use environment variables:</p> <pre><code>export TF_VAR_github_app_id=\"123456\"\nexport TF_VAR_github_app_installation_id=\"12345678\"\nexport TF_VAR_github_app_pem_file=\"/path/to/private-key.pem\"\n</code></pre>"},{"location":"guides/authentication/#security-best-practices","title":"Security Best Practices","text":""},{"location":"guides/authentication/#token-storage","title":"Token Storage","text":"<p>Secure Storage</p> <p>Store tokens and private keys securely. Never commit them to version control.</p> <p>Options for secure storage:</p> <ol> <li>Environment variables (local development)</li> <li>Secrets manager (production)</li> <li>AWS Secrets Manager</li> <li>HashiCorp Vault</li> <li>Azure Key Vault</li> <li>Google Secret Manager</li> <li>CI/CD secrets (GitHub Actions, GitLab CI)</li> </ol>"},{"location":"guides/authentication/#token-rotation","title":"Token Rotation","text":"<p>Regularly rotate your tokens:</p> <ul> <li>PATs: Rotate every 90 days</li> <li>GitHub Apps: Regenerate private keys annually</li> </ul>"},{"location":"guides/authentication/#minimal-permissions","title":"Minimal Permissions","text":"<p>Only grant the permissions you need:</p> <pre><code># \u2705 Good: Minimal scopes\n# Only repo and admin:org for managing repositories and teams\n\n# \u274c Bad: Excessive scopes\n# Including workflow, packages, etc. when not needed\n</code></pre>"},{"location":"guides/authentication/#audit-logging","title":"Audit Logging","text":"<p>Monitor token usage:</p> <ol> <li>Go to organization settings \u2192 Audit log</li> <li>Filter by token or app activity</li> <li>Review for unexpected usage</li> </ol>"},{"location":"guides/authentication/#cicd-integration","title":"CI/CD Integration","text":""},{"location":"guides/authentication/#github-actions","title":"GitHub Actions","text":"<p>Store token as a secret:</p> <ol> <li>Go to repository settings \u2192 Secrets and variables \u2192 Actions</li> <li>Add new secret: <code>TERRAFORM_GITHUB_TOKEN</code></li> <li>Use in workflow:</li> </ol> <pre><code>- name: Terraform Apply\n  env:\n    GITHUB_TOKEN: ${{ secrets.TERRAFORM_GITHUB_TOKEN }}\n  run: terraform apply -auto-approve\n</code></pre>"},{"location":"guides/authentication/#gitlab-ci","title":"GitLab CI","text":"<pre><code>variables:\n  GITHUB_TOKEN: $GITHUB_TOKEN\n\nterraform:\n  script:\n    - terraform init\n    - terraform apply -auto-approve\n</code></pre> <p>Store <code>GITHUB_TOKEN</code> in GitLab CI/CD variables (masked).</p>"},{"location":"guides/authentication/#other-ci-systems","title":"Other CI Systems","text":"<p>Consult your CI system's documentation for securely storing secrets.</p>"},{"location":"guides/authentication/#troubleshooting","title":"Troubleshooting","text":""},{"location":"guides/authentication/#invalid-token","title":"Invalid Token","text":"<pre><code>Error: 401 Bad credentials\n</code></pre> <p>Solutions: - Verify token is set correctly: <code>echo $GITHUB_TOKEN</code> - Check token hasn't expired - Regenerate token if necessary</p>"},{"location":"guides/authentication/#insufficient-permissions","title":"Insufficient Permissions","text":"<pre><code>Error: 403 Forbidden\n</code></pre> <p>Solutions: - Verify token has required scopes - Check organization permissions - Confirm you're an organization owner/admin</p>"},{"location":"guides/authentication/#github-app-authentication-failed","title":"GitHub App Authentication Failed","text":"<pre><code>Error: Could not authenticate with GitHub App\n</code></pre> <p>Solutions: - Verify App ID is correct - Check Installation ID - Ensure PEM file path is correct and readable - Confirm app is installed on the organization</p>"},{"location":"guides/authentication/#token-environment-variable-not-set","title":"Token Environment Variable Not Set","text":"<pre><code>Error: missing GitHub token\n</code></pre> <p>Solutions: </p><pre><code># Check if set\necho $GITHUB_TOKEN\n\n# Set it\nexport GITHUB_TOKEN=\"your_token_here\"\n\n# Verify\necho $GITHUB_TOKEN\n</code></pre><p></p>"},{"location":"guides/authentication/#comparison","title":"Comparison","text":"Feature Personal Access Token GitHub App Setup Complexity Simple Moderate User Dependency Yes (tied to user) No (organization-owned) Permissions Broad Granular Audit Trail Limited Comprehensive Rotation Manual Automated possible Best For Development, Testing Production, Teams Cost Free Free"},{"location":"guides/authentication/#recommendations","title":"Recommendations","text":""},{"location":"guides/authentication/#for-development","title":"For Development","text":"<p>Use a Personal Access Token (classic): - Quick to set up - Easy to test - Sufficient for learning</p>"},{"location":"guides/authentication/#for-production","title":"For Production","text":"<p>Use a GitHub App: - Not tied to user account - Better security - Better audit trail - Organization-owned</p>"},{"location":"guides/authentication/#next-steps","title":"Next Steps","text":"<ul> <li>Getting Started Guide - Deploy your first configuration</li> <li>Deployment Guide - Deploy multiple modules</li> <li>Prerequisites - Other requirements</li> </ul>"},{"location":"guides/deployment/","title":"Deployment","text":""},{"location":"guides/deployment/#deployment-guide","title":"Deployment Guide","text":"<p>This guide covers deploying all modules and managing them in different scenarios.</p>"},{"location":"guides/deployment/#deployment-strategies","title":"Deployment Strategies","text":""},{"location":"guides/deployment/#strategy-1-individual-module-deployment-recommended","title":"Strategy 1: Individual Module Deployment (Recommended)","text":"<p>Deploy each module independently for maximum flexibility and isolation.</p> <p>Advantages: - \u2705 Independent state files - \u2705 Isolated changes - \u2705 Easier troubleshooting - \u2705 Selective deployment - \u2705 Better for large organizations</p>"},{"location":"guides/deployment/#strategy-2-combined-deployment","title":"Strategy 2: Combined Deployment","text":"<p>Deploy all modules together using a wrapper or workspace.</p> <p>Advantages: - \u2705 Single apply operation - \u2705 Simplified workflow - \u2705 Better for small organizations</p>"},{"location":"guides/deployment/#individual-module-deployment","title":"Individual Module Deployment","text":""},{"location":"guides/deployment/#order-of-deployment","title":"Order of Deployment","text":"<p>Deploy in this recommended order:</p> <pre><code>graph TD\n    A[1. Organization Settings] --&gt; B[2. Repositories]\n    A --&gt; D[4. Teams]\n    B --&gt; D\n    A --&gt; C[3. Rulesets]\n\n    style A fill:#e1f5ff\n    style B fill:#e1f5ff\n    style C fill:#fff3e0\n    style D fill:#e1f5ff</code></pre> <ol> <li>Organization Settings - Foundation settings</li> <li>Repositories - Create repositories</li> <li>Rulesets - Apply organization rules (optional, requires Team/Enterprise)</li> <li>Teams - Create teams and grant access</li> </ol> <p>Dependencies</p> <p>Teams module may reference repositories, so deploy repositories first if granting team access.</p>"},{"location":"guides/deployment/#deploying-organization-settings","title":"Deploying Organization Settings","text":"<pre><code>cd org_configurations\n\n# Configure locals.tf with your organization details\n\n# Initialize\nterraform init\n\n# Plan\nterraform plan\n\n# Apply\nterraform apply\n</code></pre>"},{"location":"guides/deployment/#deploying-repositories","title":"Deploying Repositories","text":"<pre><code>cd repos\n\n# Configure configs/repositories.yaml\n\n# Initialize\nterraform init\n\n# Plan and review\nterraform plan\n\n# Apply\nterraform apply\n</code></pre>"},{"location":"guides/deployment/#deploying-organization-rulesets-optional","title":"Deploying Organization Rulesets (Optional)","text":"<p>Requires GitHub Team/Enterprise</p> <p>Skip this if you don't have GitHub Team or Enterprise plan.</p> <pre><code>cd rulesets\n\n# Configure configs/org_rulesets.yaml\n\n# Initialize\nterraform init\n\n# Plan\nterraform plan\n\n# Apply\nterraform apply\n</code></pre>"},{"location":"guides/deployment/#deploying-teams","title":"Deploying Teams","text":"<pre><code>cd teams\n\n# Configure configs/teams.yaml\n\n# Initialize\nterraform init\n\n# Plan\nterraform plan\n\n# Apply\nterraform apply\n</code></pre>"},{"location":"guides/deployment/#remote-state-management","title":"Remote State Management","text":""},{"location":"guides/deployment/#why-use-remote-state","title":"Why Use Remote State?","text":"<p>Remote state is essential for:</p> <ul> <li>Team collaboration - Multiple people working together</li> <li>State locking - Prevent concurrent modifications</li> <li>Security - Encrypted state storage</li> <li>Backup - Automatic state backup</li> <li>CI/CD - Access state from pipelines</li> </ul>"},{"location":"guides/deployment/#option-1-terraform-cloud","title":"Option 1: Terraform Cloud","text":"<p>Create <code>backend.tf</code> in each module:</p> backend.tf<pre><code>terraform {\n  backend \"remote\" {\n    organization = \"your-organization\"\n\n    workspaces {\n      name = \"github-repos\"  # Different for each module\n    }\n  }\n}\n</code></pre> <p>Module workspace names: - Organization: <code>github-org-settings</code> - Repositories: <code>github-repos</code> - Rulesets: <code>github-rulesets</code> - Teams: <code>github-teams</code></p>"},{"location":"guides/deployment/#option-2-s3-backend-aws","title":"Option 2: S3 Backend (AWS)","text":"backend.tf<pre><code>terraform {\n  backend \"s3\" {\n    bucket         = \"your-terraform-state-bucket\"\n    key            = \"github/repos/terraform.tfstate\"  # Different for each module\n    region         = \"us-east-1\"\n    encrypt        = true\n    dynamodb_table = \"terraform-state-lock\"\n  }\n}\n</code></pre> <p>Module state keys: - Organization: <code>github/org/terraform.tfstate</code> - Repositories: <code>github/repos/terraform.tfstate</code> - Rulesets: <code>github/rulesets/terraform.tfstate</code> - Teams: <code>github/teams/terraform.tfstate</code></p>"},{"location":"guides/deployment/#option-3-azure-backend","title":"Option 3: Azure Backend","text":"backend.tf<pre><code>terraform {\n  backend \"azurerm\" {\n    resource_group_name  = \"terraform-state-rg\"\n    storage_account_name = \"terraformstate\"\n    container_name       = \"tfstate\"\n    key                  = \"github-repos.tfstate\"  # Different for each module\n  }\n}\n</code></pre>"},{"location":"guides/deployment/#option-4-gcs-backend-google-cloud","title":"Option 4: GCS Backend (Google Cloud)","text":"backend.tf<pre><code>terraform {\n  backend \"gcs\" {\n    bucket = \"your-terraform-state-bucket\"\n    prefix = \"github/repos\"  # Different for each module\n  }\n}\n</code></pre>"},{"location":"guides/deployment/#migrating-to-remote-state","title":"Migrating to Remote State","text":"<p>If you started with local state, migrate to remote:</p> <ol> <li> <p>Add <code>backend.tf</code> configuration</p> </li> <li> <p>Re-initialize with migration: </p><pre><code>terraform init -migrate-state\n</code></pre><p></p> </li> <li> <p>Confirm migration when prompted: </p><pre><code>Do you want to copy existing state to the new backend?\n  Pre-existing state was found while migrating the previous \"local\" backend to the\n  newly configured \"remote\" backend. No existing state was found in the newly\n  configured \"remote\" backend. Do you want to copy this state to the new \"remote\"\n  backend? Enter \"yes\" to copy and \"no\" to start with an empty state.\n\n  Enter a value: yes\n</code></pre><p></p> </li> </ol>"},{"location":"guides/deployment/#workspace-strategy","title":"Workspace Strategy","text":"<p>Use workspaces for multiple environments:</p> <pre><code># Create workspaces\nterraform workspace new dev\nterraform workspace new staging\nterraform workspace new prod\n\n# Switch workspace\nterraform workspace select prod\n\n# List workspaces\nterraform workspace list\n</code></pre> <p>Configure environment-specific values:</p> locals.tf<pre><code>locals {\n  environment = terraform.workspace\n\n  repos = yamldecode(file(\n    \"${path.module}/configs/repositories-${local.environment}.yaml\"\n  ))\n}\n</code></pre> <p>File structure: </p><pre><code>configs/\n\u251c\u2500\u2500 repositories-dev.yaml\n\u251c\u2500\u2500 repositories-staging.yaml\n\u2514\u2500\u2500 repositories-prod.yaml\n</code></pre><p></p>"},{"location":"guides/deployment/#cicd-deployment","title":"CI/CD Deployment","text":""},{"location":"guides/deployment/#github-actions","title":"GitHub Actions","text":"<p>Create <code>.github/workflows/terraform.yml</code>:</p> .github/workflows/terraform.yml<pre><code>name: Terraform\n\non:\n  push:\n    branches: [main]\n  pull_request:\n    branches: [main]\n\nenv:\n  GITHUB_TOKEN: ${{ secrets.TERRAFORM_GITHUB_TOKEN }}\n\njobs:\n  terraform-repos:\n    name: Terraform - Repositories\n    runs-on: ubuntu-latest\n    defaults:\n      run:\n        working-directory: repos\n\n    steps:\n      - name: Checkout\n        uses: actions/checkout@v4\n\n      - name: Setup Terraform\n        uses: hashicorp/setup-terraform@v3\n        with:\n          terraform_version: 1.6.0\n\n      - name: Terraform Format\n        run: terraform fmt -check\n\n      - name: Terraform Init\n        run: terraform init\n\n      - name: Terraform Validate\n        run: terraform validate\n\n      - name: Terraform Plan\n        run: terraform plan -no-color\n        continue-on-error: true\n\n      - name: Terraform Apply\n        if: github.ref == 'refs/heads/main' &amp;&amp; github.event_name == 'push'\n        run: terraform apply -auto-approve\n\n  terraform-teams:\n    name: Terraform - Teams\n    runs-on: ubuntu-latest\n    needs: terraform-repos  # Deploy after repos\n    defaults:\n      run:\n        working-directory: teams\n\n    steps:\n      - name: Checkout\n        uses: actions/checkout@v4\n\n      - name: Setup Terraform\n        uses: hashicorp/setup-terraform@v3\n        with:\n          terraform_version: 1.6.0\n\n      - name: Terraform Init\n        run: terraform init\n\n      - name: Terraform Plan\n        run: terraform plan -no-color\n\n      - name: Terraform Apply\n        if: github.ref == 'refs/heads/main' &amp;&amp; github.event_name == 'push'\n        run: terraform apply -auto-approve\n</code></pre>"},{"location":"guides/deployment/#gitlab-ci","title":"GitLab CI","text":"<p>Create <code>.gitlab-ci.yml</code>:</p> .gitlab-ci.yml<pre><code>variables:\n  GITHUB_TOKEN: $GITHUB_TOKEN\n\nstages:\n  - validate\n  - plan\n  - apply\n\n.terraform-base:\n  image: hashicorp/terraform:1.6\n  before_script:\n    - cd $MODULE_DIR\n    - terraform init\n\nterraform-repos-validate:\n  extends: .terraform-base\n  stage: validate\n  variables:\n    MODULE_DIR: repos\n  script:\n    - terraform fmt -check\n    - terraform validate\n\nterraform-repos-plan:\n  extends: .terraform-base\n  stage: plan\n  variables:\n    MODULE_DIR: repos\n  script:\n    - terraform plan -out=plan.tfplan\n  artifacts:\n    paths:\n      - repos/plan.tfplan\n\nterraform-repos-apply:\n  extends: .terraform-base\n  stage: apply\n  variables:\n    MODULE_DIR: repos\n  script:\n    - terraform apply plan.tfplan\n  dependencies:\n    - terraform-repos-plan\n  only:\n    - main\n  when: manual\n</code></pre>"},{"location":"guides/deployment/#update-workflow","title":"Update Workflow","text":""},{"location":"guides/deployment/#making-changes","title":"Making Changes","text":"<ol> <li> <p>Edit configuration files (YAML files)</p> </li> <li> <p>Plan changes: </p><pre><code>terraform plan\n</code></pre><p></p> </li> <li> <p>Review the plan carefully</p> </li> <li> <p>Apply if satisfied: </p><pre><code>terraform apply\n</code></pre><p></p> </li> </ol>"},{"location":"guides/deployment/#rolling-back-changes","title":"Rolling Back Changes","text":""},{"location":"guides/deployment/#option-1-revert-configuration","title":"Option 1: Revert Configuration","text":"<ol> <li> <p>Revert your YAML changes: </p><pre><code>git revert HEAD\n</code></pre><p></p> </li> <li> <p>Apply the reverted configuration: </p><pre><code>terraform apply\n</code></pre><p></p> </li> </ol>"},{"location":"guides/deployment/#option-2-use-state-file","title":"Option 2: Use State File","text":"<ol> <li> <p>List state history (if using Terraform Cloud): </p><pre><code>terraform state list\n</code></pre><p></p> </li> <li> <p>Manually adjust configuration to previous state</p> </li> </ol>"},{"location":"guides/deployment/#selective-apply","title":"Selective Apply","text":"<p>Target specific resources:</p> <pre><code># Apply only a specific repository\nterraform apply -target='github_repository.repos[\"specific-repo\"]'\n\n# Apply specific team\nterraform apply -target='github_team.teams[\"platform-team\"]'\n</code></pre> <p>Use Sparingly</p> <p>Targeted applies should only be used in exceptional circumstances.</p>"},{"location":"guides/deployment/#drift-detection","title":"Drift Detection","text":"<p>Detect manual changes made outside Terraform:</p> <pre><code># Check for drift\nterraform plan -detailed-exitcode\n\n# Exit codes:\n# 0 = No changes\n# 1 = Error\n# 2 = Changes detected\n</code></pre>"},{"location":"guides/deployment/#automated-drift-detection","title":"Automated Drift Detection","text":"<p>GitHub Actions example:</p> <pre><code>- name: Detect Drift\n  run: |\n    terraform plan -detailed-exitcode\n    if [ $? -eq 2 ]; then\n      echo \"::warning::Configuration drift detected!\"\n    fi\n</code></pre>"},{"location":"guides/deployment/#best-practices","title":"Best Practices","text":""},{"location":"guides/deployment/#1-always-plan-before-apply","title":"1. Always Plan Before Apply","text":"<pre><code># \u2705 Good\nterraform plan\n# Review output\nterraform apply\n\n# \u274c Bad\nterraform apply -auto-approve  # Only for CI/CD\n</code></pre>"},{"location":"guides/deployment/#2-use-version-control","title":"2. Use Version Control","text":"<p>Commit all configuration changes:</p> <pre><code>git add configs/repositories.yaml\ngit commit -m \"Add new repository for project X\"\ngit push\n</code></pre>"},{"location":"guides/deployment/#3-review-plans-in-prs","title":"3. Review Plans in PRs","text":"<p>Configure CI to comment plan output on PRs.</p>"},{"location":"guides/deployment/#4-lock-state-during-changes","title":"4. Lock State During Changes","text":"<p>Remote backends automatically handle locking:</p> <pre><code>Acquiring state lock. This may take a few moments...\n</code></pre> <p>If someone else is applying: </p><pre><code>Error: Error locking state: resource temporarily unavailable\n</code></pre><p></p>"},{"location":"guides/deployment/#5-use-workspaces-or-separate-state-files","title":"5. Use Workspaces or Separate State Files","text":"<p>For multiple environments:</p> <pre><code># Option 1: Workspaces\nterraform workspace select prod\n\n# Option 2: Separate directories\ncd environments/prod\n</code></pre>"},{"location":"guides/deployment/#6-test-in-development-first","title":"6. Test in Development First","text":"<p>Always test changes in dev before production:</p> <pre><code># Test in dev\ncd repos\nterraform workspace select dev\nterraform apply\n\n# Verify in GitHub\n\n# Apply to prod\nterraform workspace select prod\nterraform apply\n</code></pre>"},{"location":"guides/deployment/#7-document-changes","title":"7. Document Changes","text":"<p>Add comments in YAML:</p> <pre><code>repositories:\n  critical-service:\n    # PROD-1234: Increased approvals for compliance\n    rulesets:\n      main-protection:\n        rules:\n          pull_request:\n            required_approving_review_count: 2  # Was 1\n</code></pre>"},{"location":"guides/deployment/#troubleshooting","title":"Troubleshooting","text":""},{"location":"guides/deployment/#state-lock-timeout","title":"State Lock Timeout","text":"<pre><code>Error: Error locking state: resource temporarily unavailable\n</code></pre> <p>Solutions: 1. Wait for other operation to complete 2. Force unlock (only if stuck): <code>terraform force-unlock LOCK_ID</code></p>"},{"location":"guides/deployment/#backend-initialization-failed","title":"Backend Initialization Failed","text":"<pre><code>Error: Failed to get existing workspaces\n</code></pre> <p>Solutions: 1. Check backend configuration 2. Verify credentials 3. Ensure backend resources exist</p>"},{"location":"guides/deployment/#plan-shows-unexpected-changes","title":"Plan Shows Unexpected Changes","text":"<p>Review what's different:</p> <pre><code># Show detailed diff\nterraform show\n\n# Refresh state\nterraform refresh\n</code></pre>"},{"location":"guides/deployment/#next-steps","title":"Next Steps","text":"<ul> <li>Getting Started - Deploy your first configuration</li> <li>Examples - See deployment patterns</li> <li>Best Practices - Advanced tips</li> </ul>"},{"location":"guides/getting-started/","title":"Getting Started","text":""},{"location":"guides/getting-started/#getting-started","title":"Getting Started","text":"<p>This guide will walk you through deploying your first GitHub organization configuration with Terraform.</p>"},{"location":"guides/getting-started/#overview","title":"Overview","text":"<p>We'll deploy a simple repository with branch protection to demonstrate the workflow. This example uses the free tier and works with public repositories.</p>"},{"location":"guides/getting-started/#time-required","title":"Time Required","text":"<p>\u23f1\ufe0f Approximately 15 minutes</p>"},{"location":"guides/getting-started/#what-youll-learn","title":"What You'll Learn","text":"<ul> <li>How to configure repositories with YAML</li> <li>How to deploy with Terraform</li> <li>How to add branch protection rules</li> <li>How to verify and update configurations</li> </ul>"},{"location":"guides/getting-started/#step-1-prerequisites","title":"Step 1: Prerequisites","text":"<p>Ensure you have completed the prerequisites:</p> <ul> <li>\u2705 Terraform installed</li> <li>\u2705 GitHub account with organization access</li> <li>\u2705 GitHub Personal Access Token (PAT)</li> <li>\u2705 Git installed</li> </ul> <p>Set your GitHub token:</p> <pre><code>export GITHUB_TOKEN=\"your_github_token_here\"\n</code></pre>"},{"location":"guides/getting-started/#step-2-clone-the-repository","title":"Step 2: Clone the Repository","text":"<p>Clone this example repository:</p> <pre><code>git clone https://github.com/yourusername/github-org-management-examples.git\ncd github-org-management-examples\n</code></pre>"},{"location":"guides/getting-started/#step-3-configure-your-first-repository","title":"Step 3: Configure Your First Repository","text":"<p>Navigate to the repositories module:</p> <pre><code>cd repos\n</code></pre> <p>Edit <code>configs/repositories.yaml</code> to add your first repository:</p> configs/repositories.yaml<pre><code>repositories:\n  my-first-repo:\n    name: \"my-first-repo\"\n    description: \"My first managed repository\"\n    visibility: \"public\"  # public for free tier\n\n    # Enable useful features\n    has_issues: true\n    has_discussions: false\n    has_projects: true\n    has_wiki: false\n\n    # Merge settings\n    allow_merge_commit: false\n    allow_squash_merge: true\n    allow_rebase_merge: false\n    delete_branch_on_merge: true\n\n    # Topics for discoverability\n    topics:\n      - \"terraform\"\n      - \"github\"\n      - \"automation\"\n\n    # Enable security alerts\n    vulnerability_alerts: true\n\n    # Branch protection with rulesets\n    rulesets:\n      main-protection:\n        name: \"Protect Main Branch\"\n        enforcement: \"active\"\n        target: \"branch\"\n        branch_patterns:\n          - \"main\"\n\n        rules:\n          update: true  # Require PR\n          deletion: true  # Prevent deletion\n          non_fast_forward: true  # Prevent force push\n\n          pull_request:\n            required_approving_review_count: 1\n            dismiss_stale_reviews_on_push: true\n            required_review_thread_resolution: true\n</code></pre>"},{"location":"guides/getting-started/#step-4-update-provider-configuration","title":"Step 4: Update Provider Configuration","text":"<p>Edit <code>providers.tf</code> to set your organization name:</p> providers.tf<pre><code>terraform {\n  required_providers {\n    github = {\n      source  = \"integrations/github\"\n      version = \"~&gt; 6.0\"\n    }\n  }\n}\n\nprovider \"github\" {\n  owner = \"your-org-name\"  # \u2190 Change this\n  # token is read from GITHUB_TOKEN environment variable\n}\n</code></pre>"},{"location":"guides/getting-started/#step-5-initialize-terraform","title":"Step 5: Initialize Terraform","text":"<p>Initialize the Terraform working directory:</p> <pre><code>terraform init\n</code></pre> <p>You should see:</p> <pre><code>Initializing the backend...\nInitializing provider plugins...\n- Finding integrations/github versions matching \"~&gt; 6.0\"...\n- Installing integrations/github v6.x.x...\n\nTerraform has been successfully initialized!\n</code></pre>"},{"location":"guides/getting-started/#step-6-plan-the-changes","title":"Step 6: Plan the Changes","text":"<p>Review what Terraform will create:</p> <pre><code>terraform plan\n</code></pre> <p>Expected output:</p> <pre><code>Terraform will perform the following actions:\n\n  # github_repository.repos[\"my-first-repo\"] will be created\n  + resource \"github_repository\" \"repos\" {\n      + name        = \"my-first-repo\"\n      + description = \"My first managed repository\"\n      + visibility  = \"public\"\n      # ... more attributes\n    }\n\n  # github_repository_ruleset.repo_rulesets[\"my-first-repo-main-protection\"] will be created\n  + resource \"github_repository_ruleset\" \"repo_rulesets\" {\n      + name        = \"Protect Main Branch\"\n      + enforcement = \"active\"\n      # ... more attributes\n    }\n\nPlan: 2 to add, 0 to change, 0 to destroy.\n</code></pre> <p>Review Carefully</p> <p>Always review the plan output before applying. Ensure the resources match your expectations.</p>"},{"location":"guides/getting-started/#step-7-apply-the-configuration","title":"Step 7: Apply the Configuration","text":"<p>Apply the configuration to create resources:</p> <pre><code>terraform apply\n</code></pre> <p>Terraform will show the plan again and ask for confirmation:</p> <pre><code>Do you want to perform these actions?\n  Terraform will perform the actions described above.\n  Only 'yes' will be accepted to approve.\n\n  Enter a value:\n</code></pre> <p>Type <code>yes</code> and press Enter.</p> <p>You should see:</p> <pre><code>github_repository.repos[\"my-first-repo\"]: Creating...\ngithub_repository.repos[\"my-first-repo\"]: Creation complete after 2s\ngithub_repository_ruleset.repo_rulesets[\"my-first-repo-main-protection\"]: Creating...\ngithub_repository_ruleset.repo_rulesets[\"my-first-repo-main-protection\"]: Creation complete after 1s\n\nApply complete! Resources: 2 added, 0 changed, 0 destroyed.\n</code></pre>"},{"location":"guides/getting-started/#step-8-verify-the-repository","title":"Step 8: Verify the Repository","text":"<p>Visit your GitHub organization to verify the repository was created:</p> <pre><code>https://github.com/your-org-name/my-first-repo\n</code></pre> <p>Check that:</p> <ol> <li>\u2705 Repository exists and is public</li> <li>\u2705 Description is set correctly</li> <li>\u2705 Topics are applied</li> <li>\u2705 Settings match your configuration</li> </ol>"},{"location":"guides/getting-started/#verify-branch-protection","title":"Verify Branch Protection","text":"<p>Go to repository Settings \u2192 Rules and verify:</p> <ol> <li>\u2705 \"Protect Main Branch\" ruleset exists</li> <li>\u2705 Status shows \"Active\"</li> <li>\u2705 Rules are configured correctly</li> </ol>"},{"location":"guides/getting-started/#step-9-test-branch-protection","title":"Step 9: Test Branch Protection","text":"<p>Let's verify the branch protection is working:</p> <ol> <li> <p>Clone your new repository: </p><pre><code>git clone https://github.com/your-org-name/my-first-repo.git\ncd my-first-repo\n</code></pre><p></p> </li> <li> <p>Try to push directly to main: </p><pre><code>echo \"# Test\" &gt; test.md\ngit add test.md\ngit commit -m \"Test direct push\"\ngit push origin main\n</code></pre><p></p> </li> </ol> <p>You should see an error:</p> <pre><code>remote: error: GH013: Repository rule violations found\nremote:\nremote: - Changes must be made through a pull request.\n</code></pre> <p>\u2705 Success! Branch protection is working.</p> <ol> <li>Create a pull request instead: <pre><code>git checkout -b feature/test-pr\ngit push origin feature/test-pr\n</code></pre></li> </ol> <p>Then create a PR through the GitHub web interface.</p>"},{"location":"guides/getting-started/#step-10-make-changes","title":"Step 10: Make Changes","text":"<p>Let's update the repository configuration. Edit <code>configs/repositories.yaml</code>:</p> <pre><code>repositories:\n  my-first-repo:\n    # ... existing config ...\n\n    # Add a new topic\n    topics:\n      - \"terraform\"\n      - \"github\"\n      - \"automation\"\n      - \"infrastructure-as-code\"  # \u2190 New topic\n\n    # Update ruleset to require 2 approvals\n    rulesets:\n      main-protection:\n        # ... existing config ...\n        rules:\n          pull_request:\n            required_approving_review_count: 2  # \u2190 Changed from 1\n            dismiss_stale_reviews_on_push: true\n            required_review_thread_resolution: true\n</code></pre> <p>Apply the changes:</p> <pre><code>terraform plan\nterraform apply\n</code></pre> <p>Terraform will show:</p> <pre><code>github_repository.repos[\"my-first-repo\"]: Modifying...\ngithub_repository_ruleset.repo_rulesets[\"my-first-repo-main-protection\"]: Modifying...\n\nApply complete! Resources: 0 added, 2 changed, 0 destroyed.\n</code></pre>"},{"location":"guides/getting-started/#next-steps","title":"Next Steps","text":"<p>Congratulations! \ud83c\udf89 You've successfully:</p> <ul> <li>\u2705 Created a GitHub repository with Terraform</li> <li>\u2705 Configured branch protection with rulesets</li> <li>\u2705 Verified the protection is working</li> <li>\u2705 Updated the configuration</li> </ul>"},{"location":"guides/getting-started/#continue-learning","title":"Continue Learning","text":"<ul> <li>Authentication Guide - Set up GitHub App authentication</li> <li>Deployment Guide - Deploy multiple modules</li> <li>Examples - See more practical examples</li> <li>Teams Module - Add team management</li> <li>Organization Module - Configure organization settings</li> </ul>"},{"location":"guides/getting-started/#common-next-actions","title":"Common Next Actions","text":"<ol> <li>Add More Repositories - Add additional repositories to <code>configs/repositories.yaml</code></li> <li>Configure Teams - Set up teams and permissions with the teams module</li> <li>Organization Settings - Configure organization-level settings</li> <li>CI/CD Integration - Add required status checks for your CI pipeline</li> <li>Remote State - Configure remote backend for team collaboration</li> </ol>"},{"location":"guides/getting-started/#troubleshooting","title":"Troubleshooting","text":""},{"location":"guides/getting-started/#repository-already-exists","title":"Repository Already Exists","text":"<p>If you get an error that the repository already exists:</p> <pre><code>Error: Repository already exists\n</code></pre> <p>Options: 1. Choose a different repository name 2. Import the existing repository: <code>terraform import github_repository.repos[\"my-first-repo\"] my-first-repo</code> 3. Delete the existing repository from GitHub first</p>"},{"location":"guides/getting-started/#permission-denied","title":"Permission Denied","text":"<p>If you get permission errors:</p> <pre><code>Error: 403 Forbidden\n</code></pre> <p>Check: 1. Your GITHUB_TOKEN is set correctly 2. The token has <code>repo</code> and <code>admin:org</code> scopes 3. You have admin access to the organization</p>"},{"location":"guides/getting-started/#plan-shows-no-changes","title":"Plan Shows No Changes","text":"<p>If <code>terraform plan</code> shows no changes but you expected some:</p> <ol> <li>Check your YAML syntax is correct</li> <li>Verify you saved the file</li> <li>Ensure you're in the correct directory</li> <li>Check the repository key matches</li> </ol>"},{"location":"guides/getting-started/#clean-up","title":"Clean Up","text":"<p>To remove the resources created in this tutorial:</p> <pre><code>terraform destroy\n</code></pre> <p>Destructive Action</p> <p>This will delete the repository. Any code pushed to the repository will be lost.</p> <p>Type <code>yes</code> to confirm deletion.</p>"},{"location":"modules/organization/","title":"Organization Settings","text":""},{"location":"modules/organization/#organization-settings-module","title":"Organization Settings Module","text":"<p>The Organization Settings module manages organization-level configuration for your GitHub organization.</p>"},{"location":"modules/organization/#overview","title":"Overview","text":"<p>This module configures:</p> <ul> <li>Organization billing email</li> <li>Organization description</li> <li>Member privileges (repository creation, pages, forks, etc.)</li> </ul>"},{"location":"modules/organization/#files","title":"Files","text":"<ul> <li><code>main.tf</code> - Organization settings resource definition</li> <li><code>locals.tf</code> - Environment configuration loading</li> <li><code>providers.tf</code> - GitHub provider configuration</li> <li><code>variables.tf</code> - Input variables</li> <li><code>outputs.tf</code> - Output values</li> <li><code>backend.tf</code> - Terraform backend configuration</li> </ul>"},{"location":"modules/organization/#configuration","title":"Configuration","text":"<p>The module uses local configuration in <code>locals.tf</code> to define organization settings. This approach is suitable for settings that don't change frequently.</p>"},{"location":"modules/organization/#example-configuration","title":"Example Configuration","text":"locals.tf<pre><code>locals {\n  environment = {\n    github = {\n      organization = {\n        billing_email = \"billing@example.com\"\n        description   = \"Example Organization for DevOps Automation\"\n\n        # Repository creation permissions\n        members_can_create_repositories         = false\n        members_can_create_public_repositories  = false\n        members_can_create_private_repositories = false\n        members_can_create_internal_repositories = false\n\n        # Pages permissions\n        members_can_create_pages         = false\n        members_can_create_public_pages  = false\n        members_can_create_private_pages = false\n\n        # Fork permissions\n        members_can_fork_private_repositories = false\n      }\n    }\n  }\n}\n</code></pre>"},{"location":"modules/organization/#resource-github_organization_settings","title":"Resource: github_organization_settings","text":"<p>The module creates a single <code>github_organization_settings</code> resource.</p>"},{"location":"modules/organization/#attributes","title":"Attributes","text":"Attribute Type Required Default Description <code>billing_email</code> string Yes - Organization billing email address <code>description</code> string No <code>null</code> Organization description <code>members_can_create_repositories</code> bool No <code>false</code> Allow members to create repositories <code>members_can_create_public_repositories</code> bool No <code>false</code> Allow members to create public repositories <code>members_can_create_private_repositories</code> bool No <code>false</code> Allow members to create private repositories <code>members_can_create_internal_repositories</code> bool No <code>false</code> Allow members to create internal repositories <code>members_can_create_pages</code> bool No <code>false</code> Allow members to create GitHub Pages <code>members_can_create_public_pages</code> bool No <code>false</code> Allow members to create public pages <code>members_can_create_private_pages</code> bool No <code>false</code> Allow members to create private pages <code>members_can_fork_private_repositories</code> bool No <code>false</code> Allow members to fork private repositories"},{"location":"modules/organization/#usage","title":"Usage","text":""},{"location":"modules/organization/#initial-setup","title":"Initial Setup","text":"<ol> <li> <p>Navigate to the module directory: </p><pre><code>cd org_configurations\n</code></pre><p></p> </li> <li> <p>Configure your organization settings in <code>locals.tf</code></p> </li> <li> <p>Initialize Terraform: </p><pre><code>terraform init\n</code></pre><p></p> </li> <li> <p>Review the planned changes: </p><pre><code>terraform plan\n</code></pre><p></p> </li> <li> <p>Apply the configuration: </p><pre><code>terraform apply\n</code></pre><p></p> </li> </ol>"},{"location":"modules/organization/#updating-settings","title":"Updating Settings","text":"<p>To update organization settings:</p> <ol> <li>Modify the values in <code>locals.tf</code></li> <li>Run <code>terraform plan</code> to review changes</li> <li>Run <code>terraform apply</code> to apply changes</li> </ol>"},{"location":"modules/organization/#best-practices","title":"Best Practices","text":""},{"location":"modules/organization/#security","title":"Security","text":"<p>Restrictive Defaults</p> <p>Use restrictive defaults for member privileges. Only grant permissions when necessary.</p> <pre><code># Recommended: Restrict member permissions\nmembers_can_create_repositories = false\nmembers_can_fork_private_repositories = false\n</code></pre>"},{"location":"modules/organization/#organization-description","title":"Organization Description","text":"<p>Provide a clear, concise organization description:</p> <pre><code>description = \"Open source automation tools and examples for DevOps workflows\"\n</code></pre>"},{"location":"modules/organization/#billing-email","title":"Billing Email","text":"<p>Valid Email Required</p> <p>Ensure the billing email is valid and monitored. GitHub sends important notifications to this address.</p>"},{"location":"modules/organization/#examples","title":"Examples","text":""},{"location":"modules/organization/#restrictive-organization-recommended-for-security","title":"Restrictive Organization (Recommended for Security)","text":"<pre><code>locals {\n  environment = {\n    github = {\n      organization = {\n        billing_email = \"billing@example.com\"\n        description   = \"Secure Development Organization\"\n\n        # Deny all member creation permissions\n        members_can_create_repositories          = false\n        members_can_create_public_repositories   = false\n        members_can_create_private_repositories  = false\n        members_can_create_internal_repositories = false\n        members_can_create_pages                 = false\n        members_can_create_public_pages          = false\n        members_can_create_private_pages         = false\n        members_can_fork_private_repositories    = false\n      }\n    }\n  }\n}\n</code></pre>"},{"location":"modules/organization/#open-organization-communityeducation","title":"Open Organization (Community/Education)","text":"<pre><code>locals {\n  environment = {\n    github = {\n      organization = {\n        billing_email = \"admin@opensource-project.org\"\n        description   = \"Open Source Community Project\"\n\n        # Allow public repository creation\n        members_can_create_repositories        = true\n        members_can_create_public_repositories = true\n        members_can_create_public_pages       = true\n\n        # But restrict private resources\n        members_can_create_private_repositories = false\n        members_can_create_private_pages        = false\n        members_can_fork_private_repositories   = false\n      }\n    }\n  }\n}\n</code></pre>"},{"location":"modules/organization/#outputs","title":"Outputs","text":"<p>The module outputs the organization name and login:</p> <pre><code>output \"organization_name\" {\n  description = \"The name of the organization\"\n  value       = github_organization_settings.org.name\n}\n\noutput \"organization_login\" {\n  description = \"The login of the organization\"\n  value       = github_organization_settings.org.login\n}\n</code></pre>"},{"location":"modules/organization/#troubleshooting","title":"Troubleshooting","text":""},{"location":"modules/organization/#permission-errors","title":"Permission Errors","text":"<p>If you encounter permission errors:</p> <ul> <li>Ensure your GitHub token has <code>admin:org</code> scope</li> <li>Verify you have Owner role in the organization</li> <li>Check that the organization is not an Enterprise Managed User (EMU) organization</li> </ul>"},{"location":"modules/organization/#invalid-billing-email","title":"Invalid Billing Email","text":"<p>If Terraform reports an invalid billing email:</p> <ul> <li>Verify the email address is properly formatted</li> <li>Ensure the email domain is valid</li> <li>Check that the email can receive mail from GitHub</li> </ul>"},{"location":"modules/organization/#next-steps","title":"Next Steps","text":"<ul> <li>Repositories Module - Create and manage repositories</li> <li>Teams Module - Set up teams and permissions</li> <li>Getting Started Guide - Deploy your configuration</li> </ul>"},{"location":"modules/repositories/","title":"Repositories","text":""},{"location":"modules/repositories/#repositories-module","title":"Repositories Module","text":"<p>The Repositories module manages GitHub repositories and repository-level rulesets for your organization.</p>"},{"location":"modules/repositories/#overview","title":"Overview","text":"<p>This module manages:</p> <ul> <li>Repository creation and configuration</li> <li>Repository features (issues, projects, wiki, etc.)</li> <li>Merge settings (merge commit, squash, rebase)</li> <li>Repository-level rulesets for branch protection</li> <li>Topics and vulnerability alerts</li> </ul> <p>Free Tier Compatible</p> <p>Repository-level rulesets work on public repositories with GitHub Free tier.</p>"},{"location":"modules/repositories/#files","title":"Files","text":"<ul> <li><code>main.tf</code> - Repository and ruleset resource definitions</li> <li><code>locals.tf</code> - YAML configuration loading and data transformation</li> <li><code>configs/repositories.yaml</code> - Repository definitions (YAML format)</li> <li><code>providers.tf</code> - GitHub provider configuration</li> <li><code>variables.tf</code> - Input variables</li> <li><code>outputs.tf</code> - Output values</li> <li><code>backend.tf</code> - Terraform backend configuration</li> </ul>"},{"location":"modules/repositories/#configuration","title":"Configuration","text":"<p>Repositories are defined in <code>configs/repositories.yaml</code> using a simple YAML structure.</p>"},{"location":"modules/repositories/#repository-structure","title":"Repository Structure","text":"<pre><code>repositories:\n  repository-key:\n    name: \"repository-name\"\n    description: \"Repository description\"\n    visibility: \"public\"  # public or private\n\n    # Features\n    has_issues: true\n    has_discussions: false\n    has_projects: true\n    has_wiki: false\n    has_downloads: true\n\n    # Merge settings\n    allow_merge_commit: true\n    allow_squash_merge: true\n    allow_rebase_merge: true\n    allow_auto_merge: false\n    delete_branch_on_merge: true\n\n    # Other settings\n    archived: false\n    topics:\n      - \"terraform\"\n      - \"github\"\n    vulnerability_alerts: true\n\n    # Repository Rulesets (optional)\n    rulesets:\n      ruleset-key:\n        name: \"Main Branch Protection\"\n        enforcement: \"active\"  # active, evaluate, or disabled\n        target: \"branch\"\n        branch_patterns:\n          - \"~DEFAULT_BRANCH\"\n\n        rules:\n          # ... ruleset configuration\n</code></pre>"},{"location":"modules/repositories/#repository-configuration","title":"Repository Configuration","text":""},{"location":"modules/repositories/#basic-settings","title":"Basic Settings","text":"Field Type Required Default Description <code>name</code> string Yes - Repository name <code>description</code> string No <code>null</code> Repository description <code>visibility</code> string No <code>\"private\"</code> <code>public</code> or <code>private</code>"},{"location":"modules/repositories/#features","title":"Features","text":"Field Type Default Description <code>has_issues</code> bool <code>true</code> Enable issues <code>has_discussions</code> bool <code>false</code> Enable discussions <code>has_projects</code> bool <code>true</code> Enable projects <code>has_wiki</code> bool <code>true</code> Enable wiki <code>has_downloads</code> bool <code>true</code> Enable downloads"},{"location":"modules/repositories/#merge-settings","title":"Merge Settings","text":"Field Type Default Description <code>allow_merge_commit</code> bool <code>true</code> Allow merge commits <code>allow_squash_merge</code> bool <code>true</code> Allow squash merging <code>allow_rebase_merge</code> bool <code>true</code> Allow rebase merging <code>allow_auto_merge</code> bool <code>false</code> Enable auto-merge <code>delete_branch_on_merge</code> bool <code>true</code> Auto-delete head branches"},{"location":"modules/repositories/#other-settings","title":"Other Settings","text":"Field Type Default Description <code>archived</code> bool <code>false</code> Archive the repository <code>topics</code> list(string) <code>[]</code> Repository topics <code>vulnerability_alerts</code> bool <code>true</code> Enable Dependabot alerts <code>auto_init</code> bool <code>true</code> Initialize with README <code>gitignore_template</code> string <code>null</code> Gitignore template name <code>license_template</code> string <code>null</code> License template name"},{"location":"modules/repositories/#repository-rulesets","title":"Repository Rulesets","text":"<p>Repository rulesets provide branch protection and code quality enforcement at the repository level.</p>"},{"location":"modules/repositories/#ruleset-configuration","title":"Ruleset Configuration","text":"<pre><code>rulesets:\n  main-protection:\n    name: \"Main Branch Protection\"\n    enforcement: \"active\"\n    target: \"branch\"\n\n    # Branch patterns\n    branch_patterns:\n      - \"~DEFAULT_BRANCH\"  # Matches default branch\n      - \"main\"\n      - \"master\"\n\n    # Bypass actors (optional)\n    bypass_actors:\n      - actor_id: 1234567\n        actor_type: \"Team\"\n        bypass_mode: \"always\"\n\n    rules:\n      # Prevent direct commits\n      creation: false\n      update: true\n      deletion: true\n\n      # Require linear history\n      required_linear_history: true\n\n      # Require signed commits\n      required_signatures: false\n\n      # Prevent force pushes\n      non_fast_forward: true\n\n      # Pull request requirements\n      pull_request:\n        required_approving_review_count: 1\n        dismiss_stale_reviews_on_push: true\n        require_code_owner_review: false\n        require_last_push_approval: false\n        required_review_thread_resolution: true\n\n      # Required status checks\n      required_status_checks:\n        strict_required_status_checks_policy: true\n        required_checks:\n          - context: \"ci/tests\"\n          - context: \"ci/lint\"\n</code></pre>"},{"location":"modules/repositories/#ruleset-fields","title":"Ruleset Fields","text":"Field Type Default Description <code>name</code> string Yes - <code>enforcement</code> string No <code>\"active\"</code> <code>target</code> string No <code>\"branch\"</code> <code>branch_patterns</code> list(string) No <code>[\"~DEFAULT_BRANCH\"]</code> <code>exclude_patterns</code> list(string) No <code>[]</code>"},{"location":"modules/repositories/#rules","title":"Rules","text":""},{"location":"modules/repositories/#basic-rules","title":"Basic Rules","text":"Rule Type Default Description <code>creation</code> bool <code>false</code> Block branch creation <code>update</code> bool <code>true</code> Require pull request for updates <code>deletion</code> bool <code>true</code> Block branch deletion <code>required_linear_history</code> bool <code>false</code> Require linear history <code>required_signatures</code> bool <code>false</code> Require signed commits <code>non_fast_forward</code> bool <code>true</code> Prevent force pushes"},{"location":"modules/repositories/#pull-request-rules","title":"Pull Request Rules","text":"Field Type Default Description <code>required_approving_review_count</code> number <code>1</code> Minimum approvals required <code>dismiss_stale_reviews_on_push</code> bool <code>true</code> Dismiss stale reviews on push <code>require_code_owner_review</code> bool <code>false</code> Require code owner review <code>require_last_push_approval</code> bool <code>false</code> Require approval after last push <code>required_review_thread_resolution</code> bool <code>false</code> Require all threads resolved"},{"location":"modules/repositories/#status-check-rules","title":"Status Check Rules","text":"Field Type Default Description <code>required_checks</code> list(object) <code>[]</code> List of required status checks <code>strict_required_status_checks_policy</code> bool <code>true</code> Require branches to be up to date"},{"location":"modules/repositories/#complete-example","title":"Complete Example","text":"configs/repositories.yaml<pre><code>repositories:\n  my-awesome-app:\n    name: \"my-awesome-app\"\n    description: \"An awesome application built with love\"\n    visibility: \"public\"\n\n    # Enable useful features\n    has_issues: true\n    has_discussions: true\n    has_projects: false\n    has_wiki: false\n    has_downloads: true\n\n    # Require squash merging\n    allow_merge_commit: false\n    allow_squash_merge: true\n    allow_rebase_merge: false\n    delete_branch_on_merge: true\n\n    topics:\n      - \"typescript\"\n      - \"react\"\n      - \"automation\"\n\n    vulnerability_alerts: true\n\n    rulesets:\n      main-protection:\n        name: \"Protect Main Branch\"\n        enforcement: \"active\"\n        target: \"branch\"\n        branch_patterns:\n          - \"main\"\n\n        rules:\n          update: true\n          deletion: true\n          required_linear_history: true\n          non_fast_forward: true\n\n          pull_request:\n            required_approving_review_count: 2\n            dismiss_stale_reviews_on_push: true\n            require_code_owner_review: true\n            required_review_thread_resolution: true\n\n          required_status_checks:\n            strict_required_status_checks_policy: true\n            required_checks:\n              - context: \"build\"\n              - context: \"test\"\n              - context: \"lint\"\n</code></pre>"},{"location":"modules/repositories/#usage","title":"Usage","text":""},{"location":"modules/repositories/#deploy-repositories","title":"Deploy Repositories","text":"<pre><code>cd repos\nterraform init\nterraform plan\nterraform apply\n</code></pre>"},{"location":"modules/repositories/#add-a-new-repository","title":"Add a New Repository","text":"<ol> <li>Edit <code>configs/repositories.yaml</code></li> <li>Add your repository configuration</li> <li>Run <code>terraform plan</code> to review</li> <li>Run <code>terraform apply</code> to create</li> </ol>"},{"location":"modules/repositories/#update-rulesets","title":"Update Rulesets","text":"<ol> <li>Edit the ruleset configuration in <code>configs/repositories.yaml</code></li> <li>Run <code>terraform plan</code> to review changes</li> <li>Run <code>terraform apply</code> to update</li> </ol>"},{"location":"modules/repositories/#best-practices","title":"Best Practices","text":""},{"location":"modules/repositories/#branch-protection","title":"Branch Protection","text":"<p>Always Protect Main</p> <p>Always configure rulesets for your main/master branch to prevent accidental force pushes and require code review.</p> <pre><code>rulesets:\n  main-protection:\n    name: \"Main Branch Protection\"\n    branch_patterns:\n      - \"main\"\n    rules:\n      update: true  # Require PR\n      deletion: true  # Prevent deletion\n      non_fast_forward: true  # Prevent force push\n</code></pre>"},{"location":"modules/repositories/#merge-strategy","title":"Merge Strategy","text":"<p>Choose one merge strategy for consistency:</p> <pre><code># Squash merging (recommended for cleaner history)\nallow_merge_commit: false\nallow_squash_merge: true\nallow_rebase_merge: false\n</code></pre>"},{"location":"modules/repositories/#topics","title":"Topics","text":"<p>Use topics for discoverability:</p> <pre><code>topics:\n  - \"language-typescript\"\n  - \"framework-react\"\n  - \"category-frontend\"\n  - \"automation\"\n</code></pre>"},{"location":"modules/repositories/#outputs","title":"Outputs","text":"<p>The module outputs repository information:</p> <pre><code>output \"repositories\" {\n  description = \"Map of repository names to their full attributes\"\n  value = {\n    for key, repo in github_repository.repos : key =&gt; {\n      name     = repo.name\n      html_url = repo.html_url\n      ssh_url  = repo.ssh_clone_url\n    }\n  }\n}\n</code></pre>"},{"location":"modules/repositories/#next-steps","title":"Next Steps","text":"<ul> <li>Rulesets Module - Organization-level rulesets</li> <li>Teams Module - Grant team access to repositories</li> <li>Examples - See practical examples</li> </ul>"},{"location":"modules/rulesets/","title":"Rulesets","text":""},{"location":"modules/rulesets/#organization-rulesets-module","title":"Organization Rulesets Module","text":"<p>The Organization Rulesets module manages organization-level rulesets for centralized branch protection policies across multiple repositories.</p> <p>GitHub Team/Enterprise Required</p> <p>Organization-level rulesets require a GitHub Team or Enterprise plan. For free tier, use repository-level rulesets instead.</p>"},{"location":"modules/rulesets/#overview","title":"Overview","text":"<p>Organization rulesets provide:</p> <ul> <li>Centralized policy enforcement across multiple repositories</li> <li>Repository name pattern matching</li> <li>Branch pattern matching</li> <li>Bypass actors configuration</li> <li>Pull request and status check requirements</li> </ul>"},{"location":"modules/rulesets/#files","title":"Files","text":"<ul> <li><code>main.tf</code> - Organization ruleset resource definitions</li> <li><code>locals.tf</code> - YAML configuration loading</li> <li><code>configs/org_rulesets.yaml</code> - Ruleset definitions (YAML format)</li> <li><code>providers.tf</code> - GitHub provider configuration</li> <li><code>variables.tf</code> - Input variables</li> <li><code>outputs.tf</code> - Output values</li> <li><code>backend.tf</code> - Terraform backend configuration</li> </ul>"},{"location":"modules/rulesets/#configuration","title":"Configuration","text":"<p>Organization rulesets are defined in <code>configs/org_rulesets.yaml</code>.</p>"},{"location":"modules/rulesets/#ruleset-structure","title":"Ruleset Structure","text":"<pre><code>org_rulesets:\n  ruleset-key:\n    name: \"Ruleset Name\"\n    enforcement: \"active\"  # active, evaluate, or disabled\n    target: \"branch\"\n\n    # Repository targeting\n    repository_name_patterns:\n      include:\n        - \"prod-*\"\n        - \"main-*\"\n      exclude:\n        - \"*-test\"\n\n    # Branch targeting\n    branch_patterns:\n      include:\n        - \"main\"\n        - \"master\"\n      exclude:\n        - \"experimental-*\"\n\n    # Bypass actors (optional)\n    bypass_actors:\n      - actor_id: 1234567\n        actor_type: \"Team\"\n        bypass_mode: \"always\"\n\n    # Rules\n    rules:\n      creation: false\n      update: true\n      deletion: true\n      required_linear_history: true\n      required_signatures: false\n      non_fast_forward: true\n\n      pull_request:\n        required_approving_review_count: 2\n        dismiss_stale_reviews_on_push: true\n        require_code_owner_review: true\n        require_last_push_approval: false\n        required_review_thread_resolution: true\n\n      required_status_checks:\n        strict_required_status_checks_policy: true\n        required_checks:\n          - context: \"ci/tests\"\n          - context: \"ci/security-scan\"\n</code></pre>"},{"location":"modules/rulesets/#ruleset-configuration","title":"Ruleset Configuration","text":""},{"location":"modules/rulesets/#basic-settings","title":"Basic Settings","text":"Field Type Required Default Description <code>name</code> string Yes - Ruleset name <code>enforcement</code> string No <code>\"active\"</code> Enforcement level <code>target</code> string No <code>\"branch\"</code> Target type (currently only <code>branch</code>) <p>Enforcement Levels: - <code>active</code> - Enforces the rules - <code>evaluate</code> - Dry-run mode (logs violations but doesn't block) - <code>disabled</code> - Ruleset is disabled</p>"},{"location":"modules/rulesets/#repository-targeting","title":"Repository Targeting","text":"<p>Target repositories using name patterns:</p> <pre><code>repository_name_patterns:\n  include:\n    - \"production-*\"    # All repos starting with \"production-\"\n    - \"main-services\"   # Exact match\n    - \"*-api\"          # All repos ending with \"-api\"\n  exclude:\n    - \"*-test\"         # Exclude test repositories\n    - \"sandbox-*\"      # Exclude sandbox repositories\n</code></pre> <p>Pattern Matching</p> <ul> <li>Use <code>*</code> as a wildcard</li> <li>Patterns are case-sensitive</li> <li>Include patterns are OR'd together</li> <li>Exclude patterns take precedence</li> </ul>"},{"location":"modules/rulesets/#branch-targeting","title":"Branch Targeting","text":"<p>Target specific branches:</p> <pre><code>branch_patterns:\n  include:\n    - \"main\"\n    - \"master\"\n    - \"release/*\"\n    - \"hotfix/*\"\n  exclude:\n    - \"*/wip\"\n    - \"experimental-*\"\n</code></pre>"},{"location":"modules/rulesets/#bypass-actors","title":"Bypass Actors","text":"<p>Allow specific users, teams, or apps to bypass rules:</p> <pre><code>bypass_actors:\n  - actor_id: 1234567\n    actor_type: \"Team\"\n    bypass_mode: \"always\"\n\n  - actor_id: 7654321\n    actor_type: \"OrganizationAdmin\"\n    bypass_mode: \"pull_request\"\n</code></pre> <p>Actor Types: - <code>Team</code> - A team ID - <code>OrganizationAdmin</code> - Organization administrators - <code>RepositoryRole</code> - Repository role ID - <code>Integration</code> - GitHub App ID</p> <p>Bypass Modes: - <code>always</code> - Can always bypass - <code>pull_request</code> - Can bypass via pull request</p>"},{"location":"modules/rulesets/#rules","title":"Rules","text":""},{"location":"modules/rulesets/#basic-rules","title":"Basic Rules","text":"Rule Type Default Description <code>creation</code> bool <code>false</code> Block branch creation <code>update</code> bool <code>true</code> Require pull request for updates <code>deletion</code> bool <code>true</code> Block branch deletion <code>required_linear_history</code> bool <code>false</code> Require linear history <code>required_signatures</code> bool <code>false</code> Require signed commits <code>non_fast_forward</code> bool <code>true</code> Prevent force pushes"},{"location":"modules/rulesets/#pull-request-rules","title":"Pull Request Rules","text":"<pre><code>pull_request:\n  required_approving_review_count: 2\n  dismiss_stale_reviews_on_push: true\n  require_code_owner_review: true\n  require_last_push_approval: false\n  required_review_thread_resolution: true\n</code></pre> Field Type Default Description <code>required_approving_review_count</code> number <code>1</code> Minimum required approvals <code>dismiss_stale_reviews_on_push</code> bool <code>true</code> Dismiss reviews on new push <code>require_code_owner_review</code> bool <code>false</code> Require code owner approval <code>require_last_push_approval</code> bool <code>false</code> Require approval after last push <code>required_review_thread_resolution</code> bool <code>false</code> All comments must be resolved"},{"location":"modules/rulesets/#status-check-rules","title":"Status Check Rules","text":"<pre><code>required_status_checks:\n  strict_required_status_checks_policy: true\n  required_checks:\n    - context: \"ci/tests\"\n    - context: \"ci/lint\"\n    - context: \"security/scan\"\n</code></pre> Field Type Description <code>required_checks</code> list(object) List of required check contexts <code>strict_required_status_checks_policy</code> bool Require branch to be up to date"},{"location":"modules/rulesets/#complete-example","title":"Complete Example","text":"configs/org_rulesets.yaml<pre><code>org_rulesets:\n  production-protection:\n    name: \"Production Branch Protection\"\n    enforcement: \"active\"\n    target: \"branch\"\n\n    # Apply to all production repositories\n    repository_name_patterns:\n      include:\n        - \"prod-*\"\n        - \"production-*\"\n      exclude:\n        - \"*-sandbox\"\n\n    # Protect main and release branches\n    branch_patterns:\n      include:\n        - \"main\"\n        - \"master\"\n        - \"release/*\"\n\n    # Allow platform team to bypass\n    bypass_actors:\n      - actor_id: 5678901\n        actor_type: \"Team\"\n        bypass_mode: \"always\"\n\n    rules:\n      # Prevent direct commits\n      update: true\n      deletion: true\n      non_fast_forward: true\n\n      # Require 2 approvals for production\n      pull_request:\n        required_approving_review_count: 2\n        dismiss_stale_reviews_on_push: true\n        require_code_owner_review: true\n        required_review_thread_resolution: true\n\n      # Require all CI checks to pass\n      required_status_checks:\n        strict_required_status_checks_policy: true\n        required_checks:\n          - context: \"ci/build\"\n          - context: \"ci/test\"\n          - context: \"ci/security-scan\"\n          - context: \"ci/compliance-check\"\n\n  development-standards:\n    name: \"Development Standards\"\n    enforcement: \"active\"\n    target: \"branch\"\n\n    # Apply to development repositories\n    repository_name_patterns:\n      include:\n        - \"dev-*\"\n        - \"*-service\"\n\n    # Protect development main branches\n    branch_patterns:\n      include:\n        - \"main\"\n        - \"develop\"\n\n    rules:\n      update: true\n      deletion: true\n      non_fast_forward: true\n\n      # Require 1 approval for dev\n      pull_request:\n        required_approving_review_count: 1\n        dismiss_stale_reviews_on_push: true\n\n      # Basic CI checks\n      required_status_checks:\n        strict_required_status_checks_policy: true\n        required_checks:\n          - context: \"ci/tests\"\n</code></pre>"},{"location":"modules/rulesets/#usage","title":"Usage","text":""},{"location":"modules/rulesets/#deploy-organization-rulesets","title":"Deploy Organization Rulesets","text":"<pre><code>cd rulesets\nterraform init\nterraform plan\nterraform apply\n</code></pre>"},{"location":"modules/rulesets/#add-a-new-ruleset","title":"Add a New Ruleset","text":"<ol> <li>Edit <code>configs/org_rulesets.yaml</code></li> <li>Add your ruleset configuration</li> <li>Run <code>terraform plan</code> to review</li> <li>Run <code>terraform apply</code> to create</li> </ol>"},{"location":"modules/rulesets/#evaluate-mode-testing","title":"Evaluate Mode (Testing)","text":"<p>Test rulesets before enforcing:</p> <pre><code>org_rulesets:\n  new-policy:\n    name: \"New Policy (Testing)\"\n    enforcement: \"evaluate\"  # Won't block, just logs\n    # ... rest of configuration\n</code></pre>"},{"location":"modules/rulesets/#best-practices","title":"Best Practices","text":""},{"location":"modules/rulesets/#start-with-evaluate-mode","title":"Start with Evaluate Mode","text":"<p>Test First</p> <p>Always start new rulesets in <code>evaluate</code> mode to understand the impact before enforcing.</p> <pre><code>enforcement: \"evaluate\"  # Test first\n# Later change to:\n# enforcement: \"active\"\n</code></pre>"},{"location":"modules/rulesets/#tiered-protection","title":"Tiered Protection","text":"<p>Apply different rules based on environment:</p> <pre><code># Strict for production\nproduction-protection:\n  repository_name_patterns:\n    include: [\"prod-*\"]\n  rules:\n    pull_request:\n      required_approving_review_count: 2\n\n# Relaxed for development\ndevelopment-standards:\n  repository_name_patterns:\n    include: [\"dev-*\"]\n  rules:\n    pull_request:\n      required_approving_review_count: 1\n</code></pre>"},{"location":"modules/rulesets/#repository-patterns","title":"Repository Patterns","text":"<p>Use clear naming conventions:</p> <pre><code>prod-*          \u2192 Production services\ndev-*           \u2192 Development services\n*-api           \u2192 API services\n*-frontend      \u2192 Frontend applications\ninfra-*         \u2192 Infrastructure repositories\n</code></pre>"},{"location":"modules/rulesets/#bypass-actors_1","title":"Bypass Actors","text":"<p>Limit bypass actors to essential personnel:</p> <pre><code>bypass_actors:\n  # Platform team for emergency fixes\n  - actor_id: 1234567\n    actor_type: \"Team\"\n    bypass_mode: \"always\"\n\n  # Release managers for hotfixes\n  - actor_id: 7654321\n    actor_type: \"Team\"\n    bypass_mode: \"pull_request\"\n</code></pre>"},{"location":"modules/rulesets/#differences-from-repository-rulesets","title":"Differences from Repository Rulesets","text":"Feature Organization Rulesets Repository Rulesets Scope Multiple repositories Single repository GitHub Plan Team/Enterprise Free tier (public repos) Repository Targeting Pattern-based N/A Centralized Management Yes No Override Priority Lower (can be overridden by repo rules) Higher <p>Ruleset Precedence</p> <p>Repository rulesets take precedence over organization rulesets. Use organization rulesets for baseline policies and repository rulesets for specific requirements.</p>"},{"location":"modules/rulesets/#troubleshooting","title":"Troubleshooting","text":""},{"location":"modules/rulesets/#plan-requirements-error","title":"Plan Requirements Error","text":"<p>If you don't have Team/Enterprise:</p> <pre><code>Error: Organization rulesets require GitHub Team or Enterprise\n</code></pre> <p>Solution: Use repository-level rulesets instead.</p>"},{"location":"modules/rulesets/#invalid-actor-id","title":"Invalid Actor ID","text":"<p>If you get invalid actor ID errors:</p> <ol> <li>Get team ID: <code>gh api /orgs/YOUR_ORG/teams/TEAM_NAME --jq '.id'</code></li> <li>Get app ID: <code>gh api /orgs/YOUR_ORG/installations --jq '.[].app_id'</code></li> </ol>"},{"location":"modules/rulesets/#next-steps","title":"Next Steps","text":"<ul> <li>Repository Rulesets - Free tier alternative</li> <li>Teams Module - Manage bypass actor teams</li> <li>Examples - See advanced configurations</li> </ul>"},{"location":"modules/teams/","title":"Teams","text":""},{"location":"modules/teams/#teams-module","title":"Teams Module","text":"<p>The Teams module manages GitHub teams, team memberships, and repository access permissions.</p>"},{"location":"modules/teams/#overview","title":"Overview","text":"<p>This module manages:</p> <ul> <li>Team creation with privacy settings</li> <li>Team member management with roles</li> <li>Repository access control with granular permissions</li> <li>Support for external collaborators</li> </ul>"},{"location":"modules/teams/#files","title":"Files","text":"<ul> <li><code>main.tf</code> - Team, membership, and repository access resources</li> <li><code>locals.tf</code> - YAML configuration loading and data flattening</li> <li><code>configs/teams.yaml</code> - Team definitions (YAML format)</li> <li><code>providers.tf</code> - GitHub provider configuration</li> <li><code>variables.tf</code> - Input variables</li> <li><code>outputs.tf</code> - Output values</li> <li><code>backend.tf</code> - Terraform backend configuration</li> </ul>"},{"location":"modules/teams/#configuration","title":"Configuration","text":"<p>Teams are defined in <code>configs/teams.yaml</code> with a nested structure for members and repository access.</p>"},{"location":"modules/teams/#team-structure","title":"Team Structure","text":"<pre><code>teams:\n  team-key:\n    name: \"Team Display Name\"\n    description: \"Team description\"\n    privacy: \"closed\"  # closed or secret\n\n    members:\n      - username: \"user1\"\n        role: \"maintainer\"  # maintainer or member\n      - username: \"user2\"\n        role: \"member\"\n\n    repositories:\n      - repository: \"repo-name\"\n        permission: \"push\"  # pull, triage, push, maintain, admin\n      - repository: \"another-repo\"\n        permission: \"pull\"\n</code></pre>"},{"location":"modules/teams/#team-configuration","title":"Team Configuration","text":""},{"location":"modules/teams/#team-settings","title":"Team Settings","text":"Field Type Required Default Description <code>name</code> string Yes - Team display name <code>description</code> string No <code>null</code> Team description <code>privacy</code> string No <code>\"closed\"</code> <code>closed</code> or <code>secret</code> <p>Privacy Levels: - <code>closed</code> - Visible to all organization members - <code>secret</code> - Only visible to team members and organization owners</p>"},{"location":"modules/teams/#members","title":"Members","text":"Field Type Required Description <code>username</code> string Yes GitHub username <code>role</code> string Yes <code>maintainer</code> or <code>member</code> <p>Roles: - <code>maintainer</code> - Can add/remove members and manage team settings - <code>member</code> - Regular team member</p>"},{"location":"modules/teams/#repository-access","title":"Repository Access","text":"Field Type Required Description <code>repository</code> string Yes Repository name <code>permission</code> string Yes Permission level <p>Permission Levels: - <code>pull</code> - Read-only access - <code>triage</code> - Read + manage issues/PRs (no code changes) - <code>push</code> - Read + write code access - <code>maintain</code> - Push + manage repository settings (no admin) - <code>admin</code> - Full repository access</p>"},{"location":"modules/teams/#complete-example","title":"Complete Example","text":"configs/teams.yaml<pre><code>teams:\n  platform-team:\n    name: \"Platform Engineering\"\n    description: \"Core platform team maintaining infrastructure and tools\"\n    privacy: \"closed\"\n\n    members:\n      - username: \"alice\"\n        role: \"maintainer\"\n      - username: \"bob\"\n        role: \"maintainer\"\n      - username: \"charlie\"\n        role: \"member\"\n\n    repositories:\n      - repository: \"infrastructure\"\n        permission: \"admin\"\n      - repository: \"platform-tools\"\n        permission: \"admin\"\n      - repository: \"documentation\"\n        permission: \"push\"\n\n  frontend-team:\n    name: \"Frontend Engineers\"\n    description: \"Frontend development team\"\n    privacy: \"closed\"\n\n    members:\n      - username: \"david\"\n        role: \"maintainer\"\n      - username: \"eve\"\n        role: \"member\"\n      - username: \"frank\"\n        role: \"member\"\n\n    repositories:\n      - repository: \"web-app\"\n        permission: \"push\"\n      - repository: \"mobile-app\"\n        permission: \"push\"\n      - repository: \"design-system\"\n        permission: \"maintain\"\n      - repository: \"backend-api\"\n        permission: \"pull\"  # Read-only for coordination\n\n  security-team:\n    name: \"Security Team\"\n    description: \"Security and compliance team\"\n    privacy: \"secret\"  # Secret team for security\n\n    members:\n      - username: \"grace\"\n        role: \"maintainer\"\n      - username: \"henry\"\n        role: \"member\"\n\n    repositories:\n      - repository: \"security-tools\"\n        permission: \"admin\"\n      - repository: \"infrastructure\"\n        permission: \"maintain\"\n      - repository: \"web-app\"\n        permission: \"maintain\"\n\n  external-contractors:\n    name: \"External Contractors\"\n    description: \"External collaborators with limited access\"\n    privacy: \"closed\"\n\n    members:\n      - username: \"contractor1\"\n        role: \"member\"\n      - username: \"contractor2\"\n        role: \"member\"\n\n    repositories:\n      - repository: \"project-alpha\"\n        permission: \"push\"\n      - repository: \"documentation\"\n        permission: \"pull\"\n</code></pre>"},{"location":"modules/teams/#usage","title":"Usage","text":""},{"location":"modules/teams/#deploy-teams","title":"Deploy Teams","text":"<pre><code>cd teams\nterraform init\nterraform plan\nterraform apply\n</code></pre>"},{"location":"modules/teams/#add-a-new-team","title":"Add a New Team","text":"<ol> <li>Edit <code>configs/teams.yaml</code></li> <li>Add your team configuration</li> <li>Run <code>terraform plan</code> to review</li> <li>Run <code>terraform apply</code> to create</li> </ol>"},{"location":"modules/teams/#add-team-members","title":"Add Team Members","text":"<ol> <li>Add member to team in <code>configs/teams.yaml</code>: <pre><code>members:\n  - username: \"newuser\"\n    role: \"member\"\n</code></pre></li> <li>Run <code>terraform apply</code></li> </ol>"},{"location":"modules/teams/#grant-repository-access","title":"Grant Repository Access","text":"<ol> <li>Add repository to team in <code>configs/teams.yaml</code>: <pre><code>repositories:\n  - repository: \"new-repo\"\n    permission: \"push\"\n</code></pre></li> <li>Run <code>terraform apply</code></li> </ol>"},{"location":"modules/teams/#resource-types","title":"Resource Types","text":"<p>The module creates three types of resources:</p>"},{"location":"modules/teams/#1-github_team","title":"1. github_team","text":"<p>Creates the team:</p> <pre><code>resource \"github_team\" \"teams\" {\n  for_each = local.teams\n\n  name        = each.value.name\n  description = try(each.value.description, null)\n  privacy     = try(each.value.privacy, \"closed\")\n}\n</code></pre>"},{"location":"modules/teams/#2-github_team_membership","title":"2. github_team_membership","text":"<p>Adds members to teams:</p> <pre><code>resource \"github_team_membership\" \"members\" {\n  for_each = {\n    for tm in local.team_members : \"${tm.team_key}-${tm.username}\" =&gt; tm\n  }\n\n  team_id  = github_team.teams[each.value.team_key].id\n  username = each.value.username\n  role     = each.value.role\n}\n</code></pre>"},{"location":"modules/teams/#3-github_team_repository","title":"3. github_team_repository","text":"<p>Grants team access to repositories:</p> <pre><code>resource \"github_team_repository\" \"team_repos\" {\n  for_each = {\n    for tr in local.team_repositories : \"${tr.team_key}-${tr.repository}\" =&gt; tr\n  }\n\n  team_id    = github_team.teams[each.value.team_key].id\n  repository = each.value.repository\n  permission = each.value.permission\n}\n</code></pre>"},{"location":"modules/teams/#data-transformation","title":"Data Transformation","text":"<p>The <code>locals.tf</code> file flattens the nested YAML structure into flat lists for Terraform:</p> <pre><code># Load teams from YAML\nteams = yamldecode(file(\"${path.module}/configs/teams.yaml\")).teams\n\n# Flatten team members\nteam_members = flatten([\n  for team_key, team in local.teams : [\n    for member in try(team.members, []) : {\n      team_key = team_key\n      username = member.username\n      role     = member.role\n    }\n  ]\n])\n\n# Flatten team repositories\nteam_repositories = flatten([\n  for team_key, team in local.teams : [\n    for repo in try(team.repositories, []) : {\n      team_key   = team_key\n      repository = repo.repository\n      permission = repo.permission\n    }\n  ]\n])\n</code></pre>"},{"location":"modules/teams/#best-practices","title":"Best Practices","text":""},{"location":"modules/teams/#team-structure_1","title":"Team Structure","text":"<p>Organize by Function</p> <p>Create teams based on functional areas (platform, frontend, backend) rather than projects.</p> <pre><code>teams:\n  platform-team:\n    # Manages infrastructure across all projects\n  frontend-team:\n    # Manages all frontend codebases\n  backend-team:\n    # Manages all backend services\n</code></pre>"},{"location":"modules/teams/#permission-levels","title":"Permission Levels","text":"<p>Use the principle of least privilege:</p> <pre><code># \u2705 Good: Minimal permissions\nrepositories:\n  - repository: \"backend-api\"\n    permission: \"pull\"  # Frontend team only needs to read\n\n# \u274c Bad: Excessive permissions\nrepositories:\n  - repository: \"backend-api\"\n    permission: \"admin\"  # Too much access\n</code></pre>"},{"location":"modules/teams/#external-collaborators","title":"External Collaborators","text":"<p>Create separate teams for external contractors:</p> <pre><code>external-contractors:\n  name: \"External Contractors\"\n  description: \"Temporary external access\"\n  privacy: \"closed\"\n  members:\n    - username: \"contractor1\"\n      role: \"member\"  # Not maintainer\n  repositories:\n    - repository: \"specific-project\"\n      permission: \"push\"  # Limited to specific repos\n</code></pre>"},{"location":"modules/teams/#secret-teams","title":"Secret Teams","text":"<p>Use secret teams for sensitive groups:</p> <pre><code>security-team:\n  name: \"Security Team\"\n  privacy: \"secret\"  # Hidden from non-members\n</code></pre>"},{"location":"modules/teams/#team-maintainers","title":"Team Maintainers","text":"<p>Assign multiple maintainers for redundancy:</p> <pre><code>members:\n  - username: \"alice\"\n    role: \"maintainer\"\n  - username: \"bob\"\n    role: \"maintainer\"  # At least 2 maintainers\n  - username: \"charlie\"\n    role: \"member\"\n</code></pre>"},{"location":"modules/teams/#common-patterns","title":"Common Patterns","text":""},{"location":"modules/teams/#cross-functional-teams","title":"Cross-Functional Teams","text":"<pre><code>web-platform-team:\n  name: \"Web Platform Team\"\n  description: \"Full-stack team for web platform\"\n  members:\n    - username: \"fullstack-dev-1\"\n      role: \"maintainer\"\n    - username: \"fullstack-dev-2\"\n      role: \"member\"\n  repositories:\n    - repository: \"web-frontend\"\n      permission: \"push\"\n    - repository: \"web-backend\"\n      permission: \"push\"\n    - repository: \"shared-infrastructure\"\n      permission: \"maintain\"\n</code></pre>"},{"location":"modules/teams/#read-only-stakeholder-access","title":"Read-Only Stakeholder Access","text":"<pre><code>stakeholders:\n  name: \"Product Stakeholders\"\n  description: \"Product and business stakeholders\"\n  members:\n    - username: \"product-manager\"\n      role: \"member\"\n    - username: \"business-analyst\"\n      role: \"member\"\n  repositories:\n    - repository: \"product-roadmap\"\n      permission: \"pull\"\n    - repository: \"technical-docs\"\n      permission: \"pull\"\n</code></pre>"},{"location":"modules/teams/#tiered-access","title":"Tiered Access","text":"<pre><code>junior-developers:\n  name: \"Junior Developers\"\n  repositories:\n    - repository: \"learning-sandbox\"\n      permission: \"push\"\n    - repository: \"production-app\"\n      permission: \"pull\"  # Read-only\n\nsenior-developers:\n  name: \"Senior Developers\"\n  repositories:\n    - repository: \"learning-sandbox\"\n      permission: \"maintain\"\n    - repository: \"production-app\"\n      permission: \"push\"  # Write access\n</code></pre>"},{"location":"modules/teams/#outputs","title":"Outputs","text":"<p>The module outputs team information:</p> <pre><code>output \"teams\" {\n  description = \"Map of team keys to team details\"\n  value = {\n    for key, team in github_team.teams : key =&gt; {\n      name = team.name\n      id   = team.id\n      slug = team.slug\n    }\n  }\n}\n</code></pre>"},{"location":"modules/teams/#troubleshooting","title":"Troubleshooting","text":""},{"location":"modules/teams/#user-not-found","title":"User Not Found","text":"<p>If Terraform reports a user doesn't exist:</p> <pre><code>Error: User 'username' not found\n</code></pre> <p>Solutions: 1. Verify the username is correct 2. Ensure the user has accepted the organization invitation 3. For external collaborators, invite them to the organization first</p>"},{"location":"modules/teams/#permission-denied","title":"Permission Denied","text":"<p>If you get permission errors:</p> <pre><code>Error: Must have admin access to repository\n</code></pre> <p>Solutions: 1. Ensure your GitHub token has <code>admin:org</code> scope 2. Verify you have Owner or Admin role in the organization 3. Check the repository exists and you have admin access</p>"},{"location":"modules/teams/#repository-not-found","title":"Repository Not Found","text":"<p>If Terraform can't find a repository:</p> <pre><code>Error: Repository 'repo-name' not found\n</code></pre> <p>Solutions: 1. Verify the repository name is correct (case-sensitive) 2. Ensure the repository exists in the organization 3. Check that the repository isn't in a different organization</p>"},{"location":"modules/teams/#integration-with-other-modules","title":"Integration with Other Modules","text":""},{"location":"modules/teams/#with-repositories-module","title":"With Repositories Module","text":"<p>Grant teams access to managed repositories:</p> <pre><code># In repos/configs/repositories.yaml\nrepositories:\n  my-app:\n    name: \"my-app\"\n\n# In teams/configs/teams.yaml\nteams:\n  developers:\n    repositories:\n      - repository: \"my-app\"  # Same name\n        permission: \"push\"\n</code></pre>"},{"location":"modules/teams/#with-organization-rulesets","title":"With Organization Rulesets","text":"<p>Use teams as bypass actors:</p> <pre><code># In rulesets/configs/org_rulesets.yaml\norg_rulesets:\n  production-protection:\n    bypass_actors:\n      - actor_id: 1234567  # Team ID from teams module output\n        actor_type: \"Team\"\n</code></pre>"},{"location":"modules/teams/#next-steps","title":"Next Steps","text":"<ul> <li>Repositories Module - Create repositories for teams</li> <li>Organization Module - Configure organization settings</li> <li>Examples - See practical team configurations</li> </ul>"},{"location":"reference/troubleshooting/","title":"Troubleshooting","text":""},{"location":"reference/troubleshooting/#troubleshooting","title":"Troubleshooting","text":"<p>Common issues and their solutions.</p>"},{"location":"reference/troubleshooting/#authentication-issues","title":"Authentication Issues","text":""},{"location":"reference/troubleshooting/#invalid-token-error","title":"Invalid Token Error","text":"<pre><code>Error: 401 Bad credentials\n</code></pre> <p>Causes: - Token is incorrect or expired - Token environment variable not set - Token has been revoked</p> <p>Solutions:</p> <ol> <li> <p>Verify token is set: </p><pre><code>echo $GITHUB_TOKEN\n# Should output your token\n</code></pre><p></p> </li> <li> <p>Check token hasn't expired in GitHub settings</p> </li> <li> <p>Regenerate token if needed:</p> </li> <li>Go to GitHub Settings \u2192 Developer settings \u2192 Personal access tokens</li> <li>Generate new token with required scopes</li> <li> <p>Update environment variable</p> </li> <li> <p>Ensure token is exported in current shell: </p><pre><code>export GITHUB_TOKEN=\"your_token_here\"\n</code></pre><p></p> </li> </ol>"},{"location":"reference/troubleshooting/#insufficient-permissions","title":"Insufficient Permissions","text":"<pre><code>Error: 403 Resource not accessible by integration\n</code></pre> <p>Causes: - Token missing required scopes - User lacks necessary organization permissions - Resource requires higher access level</p> <p>Solutions:</p> <ol> <li>Verify token has required scopes:</li> <li><code>repo</code> - Full control of private repositories</li> <li><code>admin:org</code> - Full control of orgs and teams</li> <li> <p><code>delete_repo</code> - Delete repositories (if destroying)</p> </li> <li> <p>Check your organization role:</p> </li> <li>Must be Owner or Admin</li> <li> <p>Go to organization \u2192 People \u2192 Check your role</p> </li> <li> <p>For GitHub Apps, verify app permissions match requirements</p> </li> </ol>"},{"location":"reference/troubleshooting/#terraform-issues","title":"Terraform Issues","text":""},{"location":"reference/troubleshooting/#state-lock-error","title":"State Lock Error","text":"<pre><code>Error: Error locking state: resource temporarily unavailable\n</code></pre> <p>Causes: - Another Terraform process is running - Previous process crashed without releasing lock - Lock timeout</p> <p>Solutions:</p> <ol> <li> <p>Wait for other operation to complete</p> </li> <li> <p>If process crashed, force unlock: </p><pre><code>terraform force-unlock LOCK_ID\n</code></pre><p></p> </li> </ol> <p>Use Carefully</p> <p>Only force unlock if you're certain no other process is running.</p> <ol> <li>Check for running Terraform processes: <pre><code>ps aux | grep terraform\n</code></pre></li> </ol>"},{"location":"reference/troubleshooting/#provider-initialization-failed","title":"Provider Initialization Failed","text":"<pre><code>Error: Failed to initialize providers\n</code></pre> <p>Causes: - Network connectivity issues - Invalid provider version - Registry unavailable</p> <p>Solutions:</p> <ol> <li> <p>Retry initialization: </p><pre><code>terraform init -upgrade\n</code></pre><p></p> </li> <li> <p>Check network connectivity: </p><pre><code>curl https://registry.terraform.io/v1/providers/integrations/github\n</code></pre><p></p> </li> <li> <p>Clear Terraform cache: </p><pre><code>rm -rf .terraform\nterraform init\n</code></pre><p></p> </li> </ol>"},{"location":"reference/troubleshooting/#plan-shows-unexpected-changes","title":"Plan Shows Unexpected Changes","text":"<p>Causes: - Manual changes made in GitHub UI - Configuration drift - State file out of sync</p> <p>Solutions:</p> <ol> <li> <p>Refresh state: </p><pre><code>terraform refresh\n</code></pre><p></p> </li> <li> <p>Review the changes carefully: </p><pre><code>terraform plan | less\n</code></pre><p></p> </li> <li> <p>If drift is intentional, import the changes: </p><pre><code>terraform import github_repository.repos[\"repo-name\"] repo-name\n</code></pre><p></p> </li> <li> <p>If drift is not desired, apply to revert: </p><pre><code>terraform apply\n</code></pre><p></p> </li> </ol>"},{"location":"reference/troubleshooting/#repository-issues","title":"Repository Issues","text":""},{"location":"reference/troubleshooting/#repository-already-exists","title":"Repository Already Exists","text":"<pre><code>Error: Repository already exists\n</code></pre> <p>Causes: - Repository with same name already exists - Previous Terraform run was incomplete</p> <p>Solutions:</p> <ol> <li> <p>Import existing repository: </p><pre><code>terraform import 'github_repository.repos[\"repo-key\"]' repository-name\n</code></pre><p></p> </li> <li> <p>Use a different repository name</p> </li> <li> <p>Delete existing repository (if safe to do so)</p> </li> </ol>"},{"location":"reference/troubleshooting/#cannot-delete-repository","title":"Cannot Delete Repository","text":"<pre><code>Error: DELETE https://api.github.com/repos/org/repo: 403\n</code></pre> <p>Causes: - Token lacks <code>delete_repo</code> scope - Repository has protection against deletion - User lacks admin access</p> <p>Solutions:</p> <ol> <li> <p>Add <code>delete_repo</code> scope to token</p> </li> <li> <p>Remove lifecycle protection if configured: </p><pre><code>resource \"github_repository\" \"repos\" {\n  # ...\n  lifecycle {\n    prevent_destroy = false  # Change from true\n  }\n}\n</code></pre><p></p> </li> <li> <p>Verify admin access to repository</p> </li> </ol>"},{"location":"reference/troubleshooting/#ruleset-creation-failed","title":"Ruleset Creation Failed","text":"<pre><code>Error: Error creating repository ruleset\n</code></pre> <p>Causes: - Invalid branch pattern - Status check doesn't exist - Bypass actor ID invalid - Free tier limitation</p> <p>Solutions:</p> <ol> <li> <p>Verify branch patterns are valid: </p><pre><code># \u2705 Good\nbranch_patterns:\n  - \"main\"\n  - \"release/*\"\n\n# \u274c Bad\nbranch_patterns:\n  - \"main**\"  # Invalid pattern\n</code></pre><p></p> </li> <li> <p>Ensure status checks exist in CI: </p><pre><code>required_checks:\n  - context: \"ci/test\"  # Must match actual check name\n</code></pre><p></p> </li> <li> <p>Verify bypass actor IDs: </p><pre><code># Get team ID\ngh api /orgs/YOUR_ORG/teams/TEAM_NAME --jq '.id'\n</code></pre><p></p> </li> <li> <p>For org rulesets, ensure you have Team/Enterprise plan</p> </li> </ol>"},{"location":"reference/troubleshooting/#team-issues","title":"Team Issues","text":""},{"location":"reference/troubleshooting/#user-not-found","title":"User Not Found","text":"<pre><code>Error: User 'username' not found\n</code></pre> <p>Causes: - Username is incorrect - User hasn't accepted organization invitation - User account doesn't exist</p> <p>Solutions:</p> <ol> <li> <p>Verify username is correct (case-sensitive)</p> </li> <li> <p>Check if user has accepted org invitation:</p> </li> <li> <p>Go to organization \u2192 People \u2192 Invitations</p> </li> <li> <p>Send invitation if needed: </p><pre><code>gh api /orgs/YOUR_ORG/invitations -f invitee_id=username\n</code></pre><p></p> </li> </ol>"},{"location":"reference/troubleshooting/#cannot-add-user-to-team","title":"Cannot Add User to Team","text":"<pre><code>Error: Failed to add member to team\n</code></pre> <p>Causes: - User not in organization - Insufficient permissions - Team privacy restrictions</p> <p>Solutions:</p> <ol> <li> <p>Ensure user is organization member first</p> </li> <li> <p>For secret teams, verify you have appropriate access</p> </li> <li> <p>Check token has <code>admin:org</code> scope</p> </li> </ol>"},{"location":"reference/troubleshooting/#repository-access-not-working","title":"Repository Access Not Working","text":"<pre><code>Error: Could not grant team access to repository\n</code></pre> <p>Causes: - Repository doesn't exist - Repository name incorrect - Team doesn't have required permissions</p> <p>Solutions:</p> <ol> <li> <p>Verify repository exists: </p><pre><code>gh repo view YOUR_ORG/REPO_NAME\n</code></pre><p></p> </li> <li> <p>Check repository name (don't include org prefix): </p><pre><code># \u2705 Good\nrepositories:\n  - repository: \"my-repo\"\n\n# \u274c Bad\nrepositories:\n  - repository: \"my-org/my-repo\"\n</code></pre><p></p> </li> <li> <p>Ensure repository is created before granting team access</p> </li> </ol>"},{"location":"reference/troubleshooting/#organization-issues","title":"Organization Issues","text":""},{"location":"reference/troubleshooting/#cannot-modify-organization-settings","title":"Cannot Modify Organization Settings","text":"<pre><code>Error: Must be an organization owner\n</code></pre> <p>Causes: - User is not organization owner - Token lacks admin:org scope</p> <p>Solutions:</p> <ol> <li>Verify you're an organization owner:</li> <li>Go to organization \u2192 People</li> <li> <p>Check your role</p> </li> <li> <p>Ask organization owner to run Terraform</p> </li> <li> <p>Or ask owner to promote you to owner role</p> </li> </ol>"},{"location":"reference/troubleshooting/#organization-rulesets-not-available","title":"Organization Rulesets Not Available","text":"<pre><code>Error: Organization rulesets require GitHub Team or Enterprise\n</code></pre> <p>Causes: - Organization is on Free plan - Feature not available on current plan</p> <p>Solutions:</p> <ol> <li> <p>Use repository-level rulesets instead: </p><pre><code># In repos/configs/repositories.yaml\nrepositories:\n  my-repo:\n    rulesets:\n      main-protection:\n        # ... configuration\n</code></pre><p></p> </li> <li> <p>Upgrade to GitHub Team or Enterprise plan</p> </li> </ol>"},{"location":"reference/troubleshooting/#yaml-configuration-issues","title":"YAML Configuration Issues","text":""},{"location":"reference/troubleshooting/#yaml-syntax-error","title":"YAML Syntax Error","text":"<pre><code>Error: Error in function call\n</code></pre> <p>Causes: - Invalid YAML syntax - Incorrect indentation - Missing required fields</p> <p>Solutions:</p> <ol> <li> <p>Validate YAML syntax: </p><pre><code>yamllint configs/repositories.yaml\n</code></pre><p></p> </li> <li> <p>Check indentation (use spaces, not tabs): </p><pre><code># \u2705 Good: 2-space indentation\nrepositories:\n  my-repo:\n    name: \"my-repo\"\n\n# \u274c Bad: Mixed indentation\nrepositories:\n    my-repo:\n      name: \"my-repo\"\n</code></pre><p></p> </li> <li> <p>Verify required fields are present: </p><pre><code>repositories:\n  my-repo:\n    name: \"my-repo\"  # Required field\n</code></pre><p></p> </li> </ol>"},{"location":"reference/troubleshooting/#cannot-load-configuration","title":"Cannot Load Configuration","text":"<pre><code>Error: Failed to load YAML configuration\n</code></pre> <p>Causes: - File doesn't exist - File path incorrect - Permission denied</p> <p>Solutions:</p> <ol> <li> <p>Verify file exists: </p><pre><code>ls -la configs/repositories.yaml\n</code></pre><p></p> </li> <li> <p>Check file path in <code>locals.tf</code>: </p><pre><code>repositories = yamldecode(\n  file(\"${path.module}/configs/repositories.yaml\")  # Correct path?\n).repositories\n</code></pre><p></p> </li> <li> <p>Ensure file is readable: </p><pre><code>chmod 644 configs/repositories.yaml\n</code></pre><p></p> </li> </ol>"},{"location":"reference/troubleshooting/#github-api-issues","title":"GitHub API Issues","text":""},{"location":"reference/troubleshooting/#rate-limit-exceeded","title":"Rate Limit Exceeded","text":"<pre><code>Error: 403 API rate limit exceeded\n</code></pre> <p>Causes: - Too many API requests - Using unauthenticated requests</p> <p>Solutions:</p> <ol> <li> <p>Wait for rate limit to reset (usually 1 hour)</p> </li> <li> <p>Ensure token is set (authenticated requests have higher limits)</p> </li> <li> <p>Check rate limit status: </p><pre><code>gh api /rate_limit\n</code></pre><p></p> </li> <li> <p>Use caching or reduce plan frequency</p> </li> </ol>"},{"location":"reference/troubleshooting/#service-unavailable","title":"Service Unavailable","text":"<pre><code>Error: 503 Service unavailable\n</code></pre> <p>Causes: - GitHub API temporarily unavailable - Network connectivity issues</p> <p>Solutions:</p> <ol> <li>Check GitHub status:</li> <li> <p>Visit https://www.githubstatus.com/</p> </li> <li> <p>Retry after a few minutes</p> </li> <li> <p>Check network connectivity: </p><pre><code>curl https://api.github.com/\n</code></pre><p></p> </li> </ol>"},{"location":"reference/troubleshooting/#cicd-issues","title":"CI/CD Issues","text":""},{"location":"reference/troubleshooting/#github-actions-token-not-set","title":"GitHub Actions Token Not Set","text":"<pre><code>Error: missing GitHub token\n</code></pre> <p>Causes: - Secret not configured - Secret name incorrect</p> <p>Solutions:</p> <ol> <li>Add secret to repository:</li> <li>Settings \u2192 Secrets and variables \u2192 Actions</li> <li> <p>Add secret: <code>TERRAFORM_GITHUB_TOKEN</code></p> </li> <li> <p>Verify secret name in workflow: </p><pre><code>env:\n  GITHUB_TOKEN: ${{ secrets.TERRAFORM_GITHUB_TOKEN }}  # Correct name?\n</code></pre><p></p> </li> </ol>"},{"location":"reference/troubleshooting/#workflow-fails-on-apply","title":"Workflow Fails on Apply","text":"<pre><code>Error: Error applying plan\n</code></pre> <p>Causes: - State lock held by another workflow - Concurrent runs - Permissions issue</p> <p>Solutions:</p> <ol> <li> <p>Ensure only one workflow runs at a time: </p><pre><code>concurrency:\n  group: terraform-${{ github.ref }}\n  cancel-in-progress: false  # Don't cancel, queue instead\n</code></pre><p></p> </li> <li> <p>Use workflow locks: </p><pre><code>- name: Lock\n  run: terraform init\n</code></pre><p></p> </li> <li> <p>Check workflow permissions: </p><pre><code>permissions:\n  contents: read\n  pull-requests: write\n</code></pre><p></p> </li> </ol>"},{"location":"reference/troubleshooting/#getting-help","title":"Getting Help","text":""},{"location":"reference/troubleshooting/#enable-debug-logging","title":"Enable Debug Logging","text":"<pre><code># Terraform debug logging\nexport TF_LOG=DEBUG\nterraform apply\n\n# GitHub CLI debug\ngh api /repos/org/repo -H \"Authorization: token $GITHUB_TOKEN\" --include\n</code></pre>"},{"location":"reference/troubleshooting/#collect-information","title":"Collect Information","text":"<p>When reporting issues, include:</p> <ol> <li> <p>Terraform version: </p><pre><code>terraform version\n</code></pre><p></p> </li> <li> <p>Provider version: </p><pre><code>grep 'integrations/github' .terraform.lock.hcl\n</code></pre><p></p> </li> <li> <p>Error message (full output)</p> </li> <li> <p>Relevant configuration (sanitize sensitive data)</p> </li> <li> <p>Steps to reproduce</p> </li> </ol>"},{"location":"reference/troubleshooting/#resources","title":"Resources","text":"<ul> <li>Terraform GitHub Provider Documentation</li> <li>GitHub REST API Documentation</li> <li>GitHub Status</li> <li>Terraform Documentation</li> </ul>"},{"location":"reference/troubleshooting/#community-support","title":"Community Support","text":"<ul> <li>GitHub Discussions</li> <li>Terraform Community Forum</li> <li>Stack Overflow</li> </ul>"},{"location":"reference/troubleshooting/#next-steps","title":"Next Steps","text":"<ul> <li>YAML Schema Reference - Complete configuration reference</li> <li>Best Practices - Avoid common pitfalls</li> <li>Getting Started Guide - Start fresh</li> </ul>"},{"location":"reference/yaml-schema/","title":"YAML Schema","text":""},{"location":"reference/yaml-schema/#yaml-schema-reference","title":"YAML Schema Reference","text":"<p>Complete reference for YAML configuration schema.</p>"},{"location":"reference/yaml-schema/#repository-configuration-schema","title":"Repository Configuration Schema","text":""},{"location":"reference/yaml-schema/#top-level-structure","title":"Top-Level Structure","text":"<pre><code>repositories:\n  &lt;repository-key&gt;:\n    # Configuration for each repository\n</code></pre>"},{"location":"reference/yaml-schema/#repository-fields","title":"Repository Fields","text":"Field Type Required Default Description <code>name</code> string \u2705 Yes - Repository name (must be unique in org) <code>description</code> string No <code>null</code> Repository description <code>visibility</code> string No <code>\"private\"</code> <code>\"public\"</code> or <code>\"private\"</code> <code>has_issues</code> boolean No <code>true</code> Enable issues <code>has_discussions</code> boolean No <code>false</code> Enable discussions <code>has_projects</code> boolean No <code>true</code> Enable projects <code>has_wiki</code> boolean No <code>true</code> Enable wiki <code>has_downloads</code> boolean No <code>true</code> Enable downloads <code>allow_merge_commit</code> boolean No <code>true</code> Allow merge commits <code>allow_squash_merge</code> boolean No <code>true</code> Allow squash merging <code>allow_rebase_merge</code> boolean No <code>true</code> Allow rebase merging <code>allow_auto_merge</code> boolean No <code>false</code> Enable auto-merge <code>delete_branch_on_merge</code> boolean No <code>true</code> Auto-delete head branches after merge <code>archived</code> boolean No <code>false</code> Archive the repository <code>topics</code> list(string) No <code>[]</code> Repository topics/tags <code>vulnerability_alerts</code> boolean No <code>true</code> Enable Dependabot alerts <code>auto_init</code> boolean No <code>true</code> Initialize with README <code>gitignore_template</code> string No <code>null</code> Gitignore template name <code>license_template</code> string No <code>null</code> License template name <code>rulesets</code> map(object) No <code>{}</code> Repository rulesets"},{"location":"reference/yaml-schema/#ruleset-schema","title":"Ruleset Schema","text":"<pre><code>rulesets:\n  &lt;ruleset-key&gt;:\n    name: string                    # Required\n    enforcement: string             # Optional: \"active\" | \"evaluate\" | \"disabled\"\n    target: string                  # Optional: \"branch\" (only option currently)\n    branch_patterns: list(string)   # Optional\n    exclude_patterns: list(string)  # Optional\n    bypass_actors: list(object)     # Optional\n    rules: object                   # Required\n</code></pre>"},{"location":"reference/yaml-schema/#ruleset-fields","title":"Ruleset Fields","text":"Field Type Required Default Description <code>name</code> string \u2705 Yes - Ruleset name <code>enforcement</code> string No <code>\"active\"</code> Enforcement level: <code>\"active\"</code>, <code>\"evaluate\"</code>, or <code>\"disabled\"</code> <code>target</code> string No <code>\"branch\"</code> Target type (only <code>\"branch\"</code> supported) <code>branch_patterns</code> list(string) No <code>[\"~DEFAULT_BRANCH\"]</code> Branch patterns to match <code>exclude_patterns</code> list(string) No <code>[]</code> Branch patterns to exclude <code>bypass_actors</code> list(object) No <code>[]</code> Users/teams that can bypass rules <code>rules</code> object \u2705 Yes - Protection rules"},{"location":"reference/yaml-schema/#branch-patterns","title":"Branch Patterns","text":"<p>Special patterns:</p> <ul> <li><code>~DEFAULT_BRANCH</code> - Matches the repository's default branch</li> <li><code>main</code> - Matches exact branch name</li> <li><code>release/*</code> - Matches all branches starting with <code>release/</code></li> <li><code>*-wip</code> - Matches all branches ending with <code>-wip</code></li> </ul>"},{"location":"reference/yaml-schema/#bypass-actors-schema","title":"Bypass Actors Schema","text":"<pre><code>bypass_actors:\n  - actor_id: number      # Required: ID of user, team, or app\n    actor_type: string    # Required: \"Team\" | \"OrganizationAdmin\" | \"RepositoryRole\" | \"Integration\"\n    bypass_mode: string   # Optional: \"always\" | \"pull_request\"\n</code></pre>"},{"location":"reference/yaml-schema/#rules-schema","title":"Rules Schema","text":"<pre><code>rules:\n  # Basic rules\n  creation: boolean                  # Optional: Block branch creation\n  update: boolean                    # Optional: Require PR for updates\n  deletion: boolean                  # Optional: Block branch deletion\n  required_linear_history: boolean   # Optional: Require linear history\n  required_signatures: boolean       # Optional: Require signed commits\n  non_fast_forward: boolean          # Optional: Prevent force pushes\n\n  # Pull request rules\n  pull_request:\n    required_approving_review_count: number       # Optional: Min approvals\n    dismiss_stale_reviews_on_push: boolean        # Optional: Dismiss on push\n    require_code_owner_review: boolean            # Optional: Require CODEOWNERS\n    require_last_push_approval: boolean           # Optional: Approval after push\n    required_review_thread_resolution: boolean    # Optional: Resolve all threads\n\n  # Status check rules\n  required_status_checks:\n    strict_required_status_checks_policy: boolean  # Optional: Require up-to-date\n    required_checks:\n      - context: string   # Required: Check context name\n</code></pre>"},{"location":"reference/yaml-schema/#rules-fields","title":"Rules Fields","text":"Field Type Default Description <code>creation</code> boolean <code>false</code> Block branch creation <code>update</code> boolean <code>true</code> Require pull request for updates <code>deletion</code> boolean <code>true</code> Block branch deletion <code>required_linear_history</code> boolean <code>false</code> Require linear commit history <code>required_signatures</code> boolean <code>false</code> Require signed commits (GPG) <code>non_fast_forward</code> boolean <code>true</code> Prevent force pushes"},{"location":"reference/yaml-schema/#pull-request-fields","title":"Pull Request Fields","text":"Field Type Default Description <code>required_approving_review_count</code> number <code>1</code> Minimum approving reviews (0-6) <code>dismiss_stale_reviews_on_push</code> boolean <code>true</code> Dismiss approvals on new push <code>require_code_owner_review</code> boolean <code>false</code> Require code owner approval <code>require_last_push_approval</code> boolean <code>false</code> Require approval after last push <code>required_review_thread_resolution</code> boolean <code>false</code> All comments must be resolved"},{"location":"reference/yaml-schema/#status-check-fields","title":"Status Check Fields","text":"Field Type Default Description <code>strict_required_status_checks_policy</code> boolean <code>true</code> Branch must be up-to-date <code>required_checks</code> list(object) <code>[]</code> List of required status checks"},{"location":"reference/yaml-schema/#complete-repository-example","title":"Complete Repository Example","text":"<pre><code>repositories:\n  my-app:\n    # Basic settings\n    name: \"my-app\"\n    description: \"My application\"\n    visibility: \"public\"\n\n    # Features\n    has_issues: true\n    has_discussions: true\n    has_projects: false\n    has_wiki: false\n    has_downloads: true\n\n    # Merge settings\n    allow_merge_commit: false\n    allow_squash_merge: true\n    allow_rebase_merge: false\n    allow_auto_merge: false\n    delete_branch_on_merge: true\n\n    # Other\n    archived: false\n    topics:\n      - \"typescript\"\n      - \"react\"\n    vulnerability_alerts: true\n    auto_init: true\n    gitignore_template: \"Node\"\n    license_template: \"mit\"\n\n    # Rulesets\n    rulesets:\n      main-protection:\n        name: \"Main Branch Protection\"\n        enforcement: \"active\"\n        target: \"branch\"\n        branch_patterns:\n          - \"main\"\n        exclude_patterns:\n          - \"experimental-*\"\n\n        bypass_actors:\n          - actor_id: 1234567\n            actor_type: \"Team\"\n            bypass_mode: \"always\"\n\n        rules:\n          creation: false\n          update: true\n          deletion: true\n          required_linear_history: true\n          required_signatures: false\n          non_fast_forward: true\n\n          pull_request:\n            required_approving_review_count: 2\n            dismiss_stale_reviews_on_push: true\n            require_code_owner_review: true\n            require_last_push_approval: false\n            required_review_thread_resolution: true\n\n          required_status_checks:\n            strict_required_status_checks_policy: true\n            required_checks:\n              - context: \"ci/build\"\n              - context: \"ci/test\"\n</code></pre>"},{"location":"reference/yaml-schema/#team-configuration-schema","title":"Team Configuration Schema","text":""},{"location":"reference/yaml-schema/#top-level-structure_1","title":"Top-Level Structure","text":"<pre><code>teams:\n  &lt;team-key&gt;:\n    # Configuration for each team\n</code></pre>"},{"location":"reference/yaml-schema/#team-fields","title":"Team Fields","text":"Field Type Required Default Description <code>name</code> string \u2705 Yes - Team display name <code>description</code> string No <code>null</code> Team description <code>privacy</code> string No <code>\"closed\"</code> <code>\"closed\"</code> or <code>\"secret\"</code> <code>members</code> list(object) No <code>[]</code> Team members <code>repositories</code> list(object) No <code>[]</code> Repository access"},{"location":"reference/yaml-schema/#member-schema","title":"Member Schema","text":"<pre><code>members:\n  - username: string   # Required: GitHub username\n    role: string       # Required: \"maintainer\" | \"member\"\n</code></pre>"},{"location":"reference/yaml-schema/#member-fields","title":"Member Fields","text":"Field Type Required Description <code>username</code> string \u2705 Yes GitHub username <code>role</code> string \u2705 Yes <code>\"maintainer\"</code> or <code>\"member\"</code>"},{"location":"reference/yaml-schema/#repository-access-schema","title":"Repository Access Schema","text":"<pre><code>repositories:\n  - repository: string   # Required: Repository name\n    permission: string   # Required: Permission level\n</code></pre>"},{"location":"reference/yaml-schema/#repository-access-fields","title":"Repository Access Fields","text":"Field Type Required Description <code>repository</code> string \u2705 Yes Repository name (without org prefix) <code>permission</code> string \u2705 Yes Permission level <p>Permission Levels:</p> Permission Access Level <code>pull</code> Read-only <code>triage</code> Read + manage issues/PRs <code>push</code> Read + write code <code>maintain</code> Push + manage settings <code>admin</code> Full repository access"},{"location":"reference/yaml-schema/#complete-team-example","title":"Complete Team Example","text":"<pre><code>teams:\n  platform-team:\n    # Team settings\n    name: \"Platform Engineering\"\n    description: \"Platform and infrastructure team\"\n    privacy: \"closed\"\n\n    # Members\n    members:\n      - username: \"alice\"\n        role: \"maintainer\"\n      - username: \"bob\"\n        role: \"maintainer\"\n      - username: \"charlie\"\n        role: \"member\"\n      - username: \"diana\"\n        role: \"member\"\n\n    # Repository access\n    repositories:\n      - repository: \"infrastructure\"\n        permission: \"admin\"\n      - repository: \"platform-tools\"\n        permission: \"admin\"\n      - repository: \"web-app\"\n        permission: \"maintain\"\n      - repository: \"documentation\"\n        permission: \"push\"\n\n  developers:\n    name: \"Developers\"\n    description: \"Development team\"\n    privacy: \"closed\"\n\n    members:\n      - username: \"dev1\"\n        role: \"member\"\n      - username: \"dev2\"\n        role: \"member\"\n\n    repositories:\n      - repository: \"web-app\"\n        permission: \"push\"\n      - repository: \"infrastructure\"\n        permission: \"pull\"\n</code></pre>"},{"location":"reference/yaml-schema/#organization-ruleset-schema","title":"Organization Ruleset Schema","text":"<p>Requires GitHub Team/Enterprise</p>"},{"location":"reference/yaml-schema/#top-level-structure_2","title":"Top-Level Structure","text":"<pre><code>org_rulesets:\n  &lt;ruleset-key&gt;:\n    # Configuration for each organization ruleset\n</code></pre>"},{"location":"reference/yaml-schema/#organization-ruleset-fields","title":"Organization Ruleset Fields","text":"Field Type Required Default Description <code>name</code> string \u2705 Yes - Ruleset name <code>enforcement</code> string No <code>\"active\"</code> Enforcement level <code>target</code> string No <code>\"branch\"</code> Target type <code>repository_name_patterns</code> object No <code>{}</code> Repository targeting <code>branch_patterns</code> object No <code>{}</code> Branch targeting <code>bypass_actors</code> list(object) No <code>[]</code> Bypass actors <code>rules</code> object \u2705 Yes - Protection rules"},{"location":"reference/yaml-schema/#repository-name-patterns-schema","title":"Repository Name Patterns Schema","text":"<pre><code>repository_name_patterns:\n  include:\n    - string  # Pattern to include\n  exclude:\n    - string  # Pattern to exclude\n</code></pre>"},{"location":"reference/yaml-schema/#branch-patterns-schema","title":"Branch Patterns Schema","text":"<pre><code>branch_patterns:\n  include:\n    - string  # Pattern to include\n  exclude:\n    - string  # Pattern to exclude\n</code></pre>"},{"location":"reference/yaml-schema/#complete-organization-ruleset-example","title":"Complete Organization Ruleset Example","text":"<pre><code>org_rulesets:\n  production-protection:\n    name: \"Production Protection\"\n    enforcement: \"active\"\n    target: \"branch\"\n\n    repository_name_patterns:\n      include:\n        - \"prod-*\"\n        - \"production-*\"\n      exclude:\n        - \"*-test\"\n        - \"*-sandbox\"\n\n    branch_patterns:\n      include:\n        - \"main\"\n        - \"master\"\n        - \"release/*\"\n      exclude:\n        - \"*/wip\"\n\n    bypass_actors:\n      - actor_id: 1234567\n        actor_type: \"Team\"\n        bypass_mode: \"always\"\n\n    rules:\n      update: true\n      deletion: true\n      non_fast_forward: true\n      required_linear_history: true\n\n      pull_request:\n        required_approving_review_count: 2\n        require_code_owner_review: true\n        required_review_thread_resolution: true\n\n      required_status_checks:\n        strict_required_status_checks_policy: true\n        required_checks:\n          - context: \"ci/build\"\n          - context: \"ci/test\"\n</code></pre>"},{"location":"reference/yaml-schema/#validation","title":"Validation","text":""},{"location":"reference/yaml-schema/#yaml-validation","title":"YAML Validation","text":"<p>Use a YAML linter to validate syntax:</p> <pre><code># Install yamllint\npip install yamllint\n\n# Validate\nyamllint configs/repositories.yaml\n</code></pre>"},{"location":"reference/yaml-schema/#terraform-validation","title":"Terraform Validation","text":"<p>Validate configuration with Terraform:</p> <pre><code># Format check\nterraform fmt -check\n\n# Validate\nterraform validate\n\n# Plan\nterraform plan\n</code></pre>"},{"location":"reference/yaml-schema/#next-steps","title":"Next Steps","text":"<ul> <li>Troubleshooting - Common issues and solutions</li> <li>Examples - See practical examples</li> <li>Module Documentation - Detailed module docs</li> </ul>"}]}